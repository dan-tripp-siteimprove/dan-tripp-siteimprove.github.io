<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>WCAG target size bookmarklet</title>

	<style>

p { line-height: 1.5; }

	</style>

	<script>

window.addEventListener("load", function(event) {
});

	</script>

</head>




<body>
<main>


<h1>WCAG target size bookmarklet</h1>

<h2>Goal</h2>

<p>To help you test for <a href="https://www.w3.org/WAI/WCAG22/Understanding/target-size-minimum.html">WCAG 2.2 success criterion 2.5.8: "Target Size (Minimum) (Level AA)"</a>.</p>

<h2>Details</h2>

<ul>
	<li>This bookmarklet doesn't make a judgement on whether an element is bigger than 24x24 or not.  It used to, around version v0.1, via blue squares and red circles.  Now it doesn't, because those judgements were wrong as often as they were right.  Instead, this bookmarklet tries to help you make that judgement.</li>
	<li>Known bug: on some pages there will be a "dead zone" for the mouse cursor.  i.e. this bookmarklet's mouse cursor won't work on top of certain elements.  One example that will trigger this "dead zone" bug is a native HTML date picker popup.</li>
	<li>Known bug: it's slow on big pages.  It might freeze for 30 seconds when you run it or refresh this bookmarklet.  Work-around: disable "Element decorations" in the bookmarklet's options menu.</li>
	<li>Known bug: Regarding the 'bounding boxes' (which are drawn as part of 'element decorations') for links that are both 1) in paragraphs, and 2) are line-wrapped: these bounding boxes will mislead you.  They'll show up as much bigger than the link really is.  This is a moot point for the success criterion, because of the its exception for inline targets.  But it's still visual clutter that is sub-optimal for you, the user of this bookmarklet.</li>
</ul>

<h2>Versions</h2>
<ul>

	<li  id="v_0_3">
			<h3>Version v0.3 (2023-11-16)</h3>
			<a href="javascript:%0D%0Avar%20bookmarkletVars_9c277bdd_ef7d_4030_a1a3_da6b2dbcf8a6%3B%0D%0A%28async%20function%20%28bookmarkletVars%29%20%7B%0D%0A%0D%0A%09let%20ENABLE_DECORATIONS%20%3D%20true%2C%20ENABLE_MOUSE_CURSOR%20%3D%20true%2C%20ENABLE_MENU%20%3D%20true%3B%0D%0A%0D%0A%09let%20UNIQUE_ID_FOR_THIS_BOOKMARKLET%20%3D%20%279c277bdd_ef7d_4030_a1a3_da6b2dbcf8a6%27%3B%0D%0A%09%0D%0A%09let%20ERASE_MARKER_DATA_ATTRIBUTE%20%3D%20%60data-bookmarklet-%24%7BUNIQUE_ID_FOR_THIS_BOOKMARKLET%7D-erase-marker%60%3B%0D%0A%0D%0A%09/%2A%20Doing%20it%20this%20way%20makes%20it%20so%20that%20this%20code%20can%20run%20either%3A%0D%0A%09-%20as%20a%20bookmarklet%20%28in%20which%20case%20this%20code%20will%20probably%20be%20run%20after%20page%20load%20is%20finished%29%0D%0A%09or%3A%0D%0A%09-%20as%20a%20tampermonkey%20script%20via%20%22%40require%22%20%28in%20which%20case%20this%20code%20will%20definitely%20be%20run%20well%20%0D%0A%09before%20page%20load%20is%20finished.%29%20%2A/%0D%0A%09if%28document.readyState%20%3D%3D%3D%20%22complete%22%29%20%7B%0D%0A%09%09run%28%29%3B%0D%0A%09%7D%20else%20%7B%0D%0A%09%09document.addEventListener%28%22readystatechange%22%2C%20%28event__%29%20%3D%3E%20%7B%0D%0A%09%09%09if%28document.readyState%20%3D%3D%3D%20%22complete%22%29%20%7B%0D%0A%09%09%09%09run%28%29%3B%0D%0A%09%09%09%7D%0D%0A%09%09%7D%29%3B%0D%0A%09%7D%0D%0A%09%0D%0A%09function%20miscInit%28%29%20%7B%0D%0A%09%09bookmarkletVars.ourListenersAndTheirElemsAndEventTypes%20%3D%20%5B%5D%3B%0D%0A%09%09bookmarkletVars.optionNameToValue%20%3D%20%7B%7D%3B%0D%0A%09%09bookmarkletVars.optionNameToValue%5B%22enable-mouse-cursor%22%5D%20%3D%20true%3B%0D%0A%09%09bookmarkletVars.optionNameToValue%5B%22mouse-cursor-show-units%22%5D%20%3D%20true%3B%0D%0A%09%09bookmarkletVars.optionNameToValue%5B%22enable-element-decorations%22%5D%20%3D%20true%3B%0D%0A%09%09bookmarkletVars.optionNameToValue%5B%22enable-element-decorations-diagonals%22%5D%20%3D%20true%3B%0D%0A%09%09bookmarkletVars.optionNameToValue%5B%22show-menu%22%5D%20%3D%20true%3B%0D%0A%09%09bookmarkletVars.optionNameToValue%5B%22on-off%22%5D%20%3D%20true%3B%0D%0A%09%09addKeyListenerForRefresh%28%29%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20checkForPreviousRun%28%29%20%7B%0D%0A%09%09if%28bookmarkletVars.hasThisBookmarkletBeenRunBeforeOnThisPageSinceLastPageLoad%20%3D%3D%3D%20undefined%29%20%7B%0D%0A%09%09%09bookmarkletVars.hasThisBookmarkletBeenRunBeforeOnThisPageSinceLastPageLoad%20%3D%20true%3B%0D%0A%09%09%09return%20false%3B%0D%0A%09%09%7D%20else%20%7B%0D%0A%09%09%09alert%28%27You%20have%20run%20this%20bookmarklet%20before%20on%20this%20page%20since%20last%20page%20load.%20%20%27%2B%0D%0A%09%09%09%09%27Running%20it%20a%20second%20time%20%28like%20you%20just%20did%29%20will%20do%20nothing.%20%20If%20you%20want%20to%20%27%2B%0D%0A%09%09%09%09%27do%20a%20%22redraw%22%2C%20look%20in%20this%20bookmarklet%5C%27s%20popup%20menu%20for%20options%20for%20that.%20%20%27%2B%0D%0A%09%09%09%09%27If%20you%20want%20to%20start%20over%2C%20reload%20the%20page%20then%20run%20the%20bookmarklet%20again.%27%29%3B%0D%0A%09%09%09return%20true%3B%0D%0A%09%09%7D%0D%0A%09%7D%0D%0A%0D%0A%09function%20run%28%29%20%7B%0D%0A%09%09if%28checkForPreviousRun%28%29%29%20return%3B%0D%0A%09%09miscInit%28%29%3B%0D%0A%09%09draw%28%29%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20addKeyListenerForRefresh%28%29%20%7B%0D%0A%09%09document.addEventListener%28%27keydown%27%2C%20function%28e%29%20%7B%0D%0A%09%09%09if%20%28e.altKey%20%26%26%20e.key%20%3D%3D%3D%20%27r%27%29%20%7B%0D%0A%09%09%09%09redraw%28%29%3B%0D%0A%09%09%09%7D%0D%0A%09%09%7D%2C%20false%29%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20makeWrapperDiv%28%29%20%7B%0D%0A%09%09let%20r%20%3D%20document.createElement%28%27div%27%29%3B%0D%0A%09%09r.setAttribute%28%27style%27%2C%20%22position%3A%20relative%20%21important%3B%20margin%3A%200%20%21important%3B%20%22%2B%0D%0A%09%09%09%22padding%3A%200%20%21important%3B%22%29%3B%0D%0A%09%09return%20r%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20getCenterPtOfElem%28elemBoundingRect_%29%20%7B%0D%0A%09%09let%20rect%20%3D%20elemBoundingRect_%3B%0D%0A%09%09return%20%7B%0D%0A%09%09%09top%3A%20rect.top%20%2B%20window.scrollY%20%2B%20rect.height/2%2C%0D%0A%09%09%09left%3A%20rect.left%20%2B%20window.scrollX%20%2B%20rect.width/2%0D%0A%09%09%7D%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20makeGuidelineCircleDecorationElem%28elemBoundingRect_%29%20%7B%0D%0A%09%09let%20centerPt%20%3D%20getCenterPtOfElem%28elemBoundingRect_%29%3B%0D%0A%0D%0A%09%09let%20circleDiam%20%3D%2024%3B%0D%0A%09%09let%20circleRadius%20%3D%20circleDiam/2%3B%0D%0A%0D%0A%09%09/%2A%20re%3A%20rounding%2C%20see%20comment%2093a9bc2f-4da0-431e-88a5-5997d0c01fc6.%20%2A/%0D%0A%09%09let%20left%20%3D%20Math.round%28centerPt.left%20-%20circleRadius%29%3B%0D%0A%09%09let%20top%20%3D%20Math.round%28centerPt.top%20-%20circleRadius%29%3B%0D%0A%09%09let%20strokeWidth%20%3D%201%3B%0D%0A%09%09let%20singleCircleSvgStrFunc%20%3D%20%28color%29%20%3D%3E%20%60%3Ccircle%20cx%3D%22%24%7BcircleRadius%7D%22%20cy%3D%22%24%7BcircleRadius%7D%22%20%0D%0A%09%09%09r%3D%22%24%7BcircleRadius-strokeWidth/2%7D%22%20%0D%0A%09%09%09stroke%3D%22%24%7Bcolor%7D%22%20stroke-width%3D%22%24%7BstrokeWidth%7D%22%20fill%3D%22transparent%22%3E%3C/circle%3E%20%60%3B%0D%0A%09%09let%20svgStr%20%3D%20%0D%0A%09%09%09%60%3Csvg%20xmlns%3D%27http%3A//www.w3.org/2000/svg%27%20%0D%0A%09%09%09%09%09aria-hidden%3D%22true%22%20%0D%0A%09%09%09%09%09style%3D%22position%3A%20absolute%3B%20left%3A%20%24%7Bleft%7Dpx%3B%20top%3A%20%24%7Btop%7Dpx%3B%20%0D%0A%09%09%09%09%09%09width%3A%20%24%7BcircleDiam%7Dpx%3B%20height%3A%20%24%7BcircleDiam%7Dpx%3B%20z-index%3A%209999%3B%20margin%3A%200px%3B%20%0D%0A%09%09%09%09%09%09pointer-events%3A%20none%3B%22%3E%20%0D%0A%09%09%09%09%24%7BsingleCircleSvgStrFunc%28%22rgba%28255%2C0%2C0%2C0.4%29%22%29%7D%20%0D%0A%09%09%09%09%24%7BsingleCircleSvgStrFunc%28%22rgba%28255%2C255%2C255%2C0.15%29%22%29%7D%20%0D%0A%09%09%09%09%24%7BsingleCircleSvgStrFunc%28%22rgba%280%2C0%2C0%2C0.15%29%22%29%7D%20%0D%0A%09%09%09%3C/svg%3E%60%3B%0D%0A%0D%0A%09%09let%20r%20%3D%20%28new%20DOMParser%28%29%29.parseFromString%28svgStr%2C%20%27image/svg%2Bxml%27%29%3B%0D%0A%09%09r%20%3D%20r.documentElement%3B%0D%0A%09%09return%20r%3B%0D%0A%09%7D%0D%0A%0D%0A%0D%0A%09function%20makeGuidelineSquareDecorationElem%28elemBoundingRect_%29%20%7B%0D%0A%09%09let%20centerPt%20%3D%20getCenterPtOfElem%28elemBoundingRect_%29%3B%0D%0A%09%09let%20squareSideLen%20%3D%2024%2C%20halfSquareSideLen%20%3D%20squareSideLen/2%3B%0D%0A%09%09/%2A%20re%3A%20rounding%2C%20see%20comment%2093a9bc2f-4da0-431e-88a5-5997d0c01fc6.%20%2A/%0D%0A%09%09let%20left%20%3D%20Math.round%28centerPt.left%20-%20halfSquareSideLen%29%3B%0D%0A%09%09let%20top%20%3D%20Math.round%28centerPt.top%20-%20halfSquareSideLen%29%3B%0D%0A%09%09let%20width%20%3D%20squareSideLen%2B1%2C%20height%20%3D%20squareSideLen%2B1%3B%0D%0A%09%09let%20strokeWidth%20%3D%201%3B%0D%0A%09%09let%20singleSquareSvgStrFunc%20%3D%20%28color%29%20%3D%3E%20%60%3Crect%20x%3D%22%24%7BstrokeWidth/2%7D%22%20y%3D%22%24%7BstrokeWidth/2%7D%22%20%0D%0A%09%09%09%09width%3D%22%24%7BsquareSideLen-strokeWidth%7D%22%20height%3D%22%24%7BsquareSideLen-strokeWidth%7D%22%20%0D%0A%09%09%09%09stroke%3D%22%24%7Bcolor%7D%22%20stroke-width%3D%22%24%7BstrokeWidth%7D%22%20fill%3D%22transparent%22%20/%3E%20%60%3B%0D%0A%09%09let%20svgStr%20%3D%20%0D%0A%09%09%09%60%3Csvg%20xmlns%3D%27http%3A//www.w3.org/2000/svg%27%20aria-hidden%3D%22true%22%20%0D%0A%09%09%09%09%09style%3D%22position%3A%20absolute%3B%20left%3A%20%24%7Bleft%7Dpx%3B%20top%3A%20%24%7Btop%7Dpx%3B%20%0D%0A%09%09%09%09%09%09width%3A%20%24%7Bwidth%7Dpx%3B%20height%3A%20%24%7Bheight%7Dpx%3B%20z-index%3A%209999%3B%20%0D%0A%09%09%09%09%09%09margin%3A%200px%3B%20pointer-events%3A%20none%3B%22%3E%20%0D%0A%09%09%09%09%24%7BsingleSquareSvgStrFunc%28%22rgba%28255%2C0%2C0%2C0.4%29%22%29%7D%20%0D%0A%09%09%09%09%24%7BsingleSquareSvgStrFunc%28%22rgba%28255%2C255%2C255%2C0.15%29%22%29%7D%20%0D%0A%09%09%09%09%24%7BsingleSquareSvgStrFunc%28%22rgba%280%2C0%2C0%2C0.15%29%22%29%7D%20%0D%0A%09%09%09%3C/svg%3E%60%3B%0D%0A%09%09let%20svg%20%3D%20%28new%20DOMParser%28%29%29.parseFromString%28svgStr%2C%20%27image/svg%2Bxml%27%29%3B%0D%0A%09%09svg%20%3D%20svg.documentElement%3B%0D%0A%09%09return%20%7Brect%3A%20%7Bleft%2C%20top%2C%20width%2C%20height%7D%2C%20svg%7D%3B%0D%0A%09%7D%0D%0A%09%0D%0A%09function%20doesElemHaveZeroWidthOrZeroHeight%28elem_%29%20%7B%0D%0A%09%09let%20rect%20%3D%20elem_.getBoundingClientRect%28%29%3B%0D%0A%09%09let%20r%20%3D%20rect.width%20%3D%3D%3D%200%20%7C%7C%20rect.height%20%3D%3D%3D%200%3B%0D%0A%09%09return%20r%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20isElemCompletelyClipped%28elem_%29%20%7B%0D%0A%09%09return%20doesElemHaveZeroWidthOrZeroHeight%28elem_%29%20%7C%7C%20%0D%0A%09%09%09isElemCompletelyClippedByAnyAncestor%28elem_%29%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20isElemCompletelyClippedByAnyAncestor%28elem_%29%20%7B%0D%0A%09%09let%20currentElement%20%3D%20elem_%3B%0D%0A%09%09while%20%28currentElement.parentElement%29%20%7B%0D%0A%09%09%09let%20parent%20%3D%20currentElement.parentElement%3B%0D%0A%0D%0A%09%09%09let%20computedStyle%20%3D%20getComputedStyle%28parent%29%3B%0D%0A%09%09%09if%20%28computedStyle.overflow%20%3D%3D%3D%20%27hidden%27%20%7C%7C%20computedStyle.overflowX%20%3D%3D%3D%20%27hidden%27%20%0D%0A%09%09%09%09%09%7C%7C%20computedStyle.overflowY%20%3D%3D%3D%20%27hidden%27%29%20%7B%0D%0A%0D%0A%09%09%09%09let%20parentRect%20%3D%20parent.getBoundingClientRect%28%29%3B%0D%0A%09%09%09%09let%20elementRect%20%3D%20elem_.getBoundingClientRect%28%29%3B%0D%0A%0D%0A%09%09%09%09if%20%28elementRect.bottom%20%3C%3D%20parentRect.top%20%7C%7C%20%0D%0A%09%09%09%09%09%09elementRect.top%20%3E%3D%20parentRect.bottom%20%7C%7C%20%0D%0A%09%09%09%09%09%09elementRect.right%20%3C%3D%20parentRect.left%20%7C%7C%20%0D%0A%09%09%09%09%09%09elementRect.left%20%3E%3D%20parentRect.right%29%20%7B%0D%0A%09%09%09%09%09return%20true%3B%0D%0A%09%09%09%09%7D%0D%0A%09%09%09%7D%0D%0A%09%09%09currentElement%20%3D%20parent%3B%0D%0A%09%09%7D%0D%0A%09%09return%20false%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20isElemVisible%28elem_%29%20%7B%0D%0A%09%09let%20r%20%3D%20true%3B%0D%0A%09%09let%20elemStyle%20%3D%20getComputedStyle%28elem_%29%3B%0D%0A%09%09if%28elemStyle.visibility%20%3D%3D%3D%20%27hidden%27%20%7C%7C%20elemStyle.opacity%20%3D%3D%200%29%20%7B%0D%0A%09%09%09r%20%3D%20false%3B%0D%0A%09%09%7D%0D%0A%09%09if%28r%29%20%7B%0D%0A%09%09%09for%28let%20elemAncestor%20%3D%20elem_%3B%20elemAncestor%3B%20elemAncestor%20%3D%20elemAncestor.parentElement%29%20%7B%0D%0A%09%09%09%09if%28getComputedStyle%28elemAncestor%29.display%20%3D%3D%3D%20%27none%27%29%20%7B%0D%0A%09%09%09%09%09r%20%3D%20false%3B%0D%0A%09%09%09%09%09break%3B%0D%0A%09%09%09%09%7D%0D%0A%09%09%09%7D%0D%0A%09%09%7D%0D%0A%09%09if%28r%20%26%26%20isElemCompletelyClipped%28elem_%29%29%20%7B%0D%0A%09%09%09r%20%3D%20false%3B%0D%0A%09%09%7D%0D%0A%09%09return%20r%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20removeAllElementsAddedByUs%28%29%20%7B%0D%0A%09%09for%28let%20e%20of%20document.querySelectorAll%28%60%5B%24%7BERASE_MARKER_DATA_ATTRIBUTE%7D%5D%60%29%29%20%7B%0D%0A%09%09%09e.parentElement.removeChild%28e%29%3B%0D%0A%09%09%7D%0D%0A%09%7D%0D%0A%0D%0A%09function%20erase%28%29%20%7B%0D%0A%09%09removeAllElementsAddedByUs%28%29%3B%0D%0A%09%09removeAllListenersAddedByUs%28%29%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20addEraseMarkerToElem%28elem_%29%20%7B%0D%0A%09%09elem_.setAttribute%28ERASE_MARKER_DATA_ATTRIBUTE%2C%20%27%27%29%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20addEventListener%28elem_%2C%20eventType_%2C%20listener_%29%20%7B%0D%0A%09%09elem_.addEventListener%28eventType_%2C%20listener_%29%3B%0D%0A%09%09addListenerToOurList%28listener_%2C%20elem_%2C%20eventType_%29%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20removeAllListenersAddedByUs%28%29%20%7B%0D%0A%09%09for%28let%20e%20of%20bookmarkletVars.ourListenersAndTheirElemsAndEventTypes%29%20%7B%0D%0A%09%09%09let%20listener%20%3D%20e%5B0%5D%2C%20elem%20%3D%20e%5B1%5D%2C%20eventType%20%3D%20e%5B2%5D%3B%0D%0A%09%09%09elem.removeEventListener%28eventType%2C%20listener%29%3B%0D%0A%09%09%7D%0D%0A%09%09bookmarkletVars.ourListenersAndTheirElemsAndEventTypes%20%3D%20%5B%5D%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20addListenerToOurList%28listener_%2C%20elem_%2C%20eventType_%29%20%7B%0D%0A%09%09bookmarkletVars.ourListenersAndTheirElemsAndEventTypes.push%28%0D%0A%09%09%09%5Blistener_%2C%20elem_%2C%20eventType_%5D%29%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20drawAllDecorations%28parentElemForEverythingWeCreate_%2C%20drawDiagonals_%29%20%7B%0D%0A%09%09let%20decorationsParentElem%20%3D%20document.createElement%28%27div%27%29%3B%0D%0A%09%09parentElemForEverythingWeCreate_.appendChild%28decorationsParentElem%29%3B%0D%0A%09%09let%20selector%20%3D%20%60button%2C%20a%2C%20label%2C%20div%5Brole%3D%22button%22%5D%2C%20%0D%0A%09%09%09details%20%3E%20summary%2C%20input%3Anot%28%5Btype%3Dhidden%5D%29%2C%20select%2C%20textarea%2C%20%5Btabindex%5D%2C%20%60%3B%0D%0A%09%09let%20selectorRoles%20%3D%20%5B%27button%27%2C%20%27checkbox%27%2C%20%27link%27%2C%20%27menuitem%27%2C%20%27option%27%2C%20%0D%0A%09%09%09%27radio%27%2C%20%27switch%27%2C%20%27tab%27%5D%3B%0D%0A%09%09selector%20%2B%3D%20selectorRoles.map%28x%20%3D%3E%20%60%5Brole%3D%22%24%7Bx%7D%22%5D%60%29.join%28%27%2C%20%27%29%3B%0D%0A%09%09let%20elems%20%3D%20document.querySelectorAll%28selector%29%3B%0D%0A%09%09for%28let%20elem%20of%20elems%29%20%7B%0D%0A%09%09%09if%28%21isElemVisible%28elem%29%29%20continue%3B%0D%0A%09%09%09if%28parentElemForEverythingWeCreate_.contains%28elem%29%29%20%7B%0D%0A%09%09%09%09continue%3B%20/%2A%20we%20don%27t%20want%20to%20decorate%20our%20menu.%20%2A/%0D%0A%09%09%09%7D%0D%0A%09%09%09drawDecorationsForElem%28decorationsParentElem%2C%20elem.getBoundingClientRect%28%29%2C%20%0D%0A%09%09%09%09drawDiagonals_%29%3B%0D%0A%09%09%7D%0D%0A%09%7D%0D%0A%0D%0A%09function%20drawDecorationsForElem%28decorationsParentElem_%2C%20elemBoundingRect_%2C%20drawDiagonals_%29%20%7B%0D%0A%09%09let%20square%20%3D%20makeGuidelineSquareDecorationElem%28elemBoundingRect_%29%3B%0D%0A%09%09decorationsParentElem_.appendChild%28square.svg%29%3B%0D%0A%09%09decorationsParentElem_.appendChild%28makeGuidelineCircleDecorationElem%28elemBoundingRect_%29%29%3B%0D%0A%09%09decorationsParentElem_.appendChild%28makeElemBoundingRectDecorationElem%28elemBoundingRect_%29%29%3B%0D%0A%09%09if%28drawDiagonals_%29%20%7B%0D%0A%09%09%09decorationsParentElem_.appendChild%28makeDiagonalsDecorationElem%28elemBoundingRect_%2C%20square.rect%29%29%3B%0D%0A%09%09%7D%0D%0A%09%7D%0D%0A%0D%0A%09function%20makeDiagonalsDecorationElem%28elemBoundingRect_%29%20%7B%0D%0A%09%09let%20guidelineSquareSideLen%20%3D%2024%3B%0D%0A%09%09let%20strokeWidth%20%3D%201%3B%0D%0A%09%09let%20svgWidth%20%3D%20Math.max%28elemBoundingRect_.width%2C%20guidelineSquareSideLen%29%3B%0D%0A%09%09let%20svgHeight%20%3D%20Math.max%28elemBoundingRect_.height%2C%20guidelineSquareSideLen%29%3B%0D%0A%09%09let%20centerPtAbsolute%20%3D%20%7Bx%3A%20elemBoundingRect_.left%2Bwindow.scrollX%2BelemBoundingRect_.width/2%2C%20%0D%0A%09%09%09y%3A%20elemBoundingRect_.top%2Bwindow.scrollY%2BelemBoundingRect_.height/2%7D%3B%0D%0A%09%09let%20svgRectAbsolute%20%3D%20DOMRect.fromRect%28%7B%0D%0A%09%09%09%09x%3A%20centerPtAbsolute.x-svgWidth/2%2C%20y%3A%20centerPtAbsolute.y-svgHeight/2%2C%20%0D%0A%09%09%09%09width%3A%20svgWidth%2C%20height%3A%20svgHeight%0D%0A%09%09%09%7D%29%3B%0D%0A%09%09let%20centerPtRelative%20%3D%20%7Bx%3A%20svgRectAbsolute.width/2%2C%20y%3A%20svgRectAbsolute.height/2%7D%3B%0D%0A%09%09let%20elemBoundingRectRelative%20%3D%20DOMRect.fromRect%28%7B%0D%0A%09%09%09%09x%3A%20centerPtRelative.x-elemBoundingRect_.width/2%2C%20%0D%0A%09%09%09%09y%3A%20centerPtRelative.y-elemBoundingRect_.height/2%2C%20%0D%0A%09%09%09%09width%3A%20elemBoundingRect_.width%2C%20height%3A%20elemBoundingRect_.height%20%0D%0A%09%09%09%7D%29%3B%0D%0A%09%09let%20guidelineRectRelative%20%3D%20DOMRect.fromRect%28%7B%0D%0A%09%09%09%09x%3A%20centerPtRelative.x-guidelineSquareSideLen/2%2BstrokeWidth/2%2C%20%0D%0A%09%09%09%09y%3A%20centerPtRelative.y-guidelineSquareSideLen/2%2BstrokeWidth/2%2C%20%0D%0A%09%09%09%09width%3A%20guidelineSquareSideLen-strokeWidth%2C%20height%3A%20guidelineSquareSideLen-strokeWidth%20%0D%0A%09%09%09%7D%29%3B%0D%0A%09%09let%20singleLineFunc%20%3D%20%28x1%2C%20y1%2C%20x2%2C%20y2%2C%20color%29%20%3D%3E%20%0D%0A%09%09%09%60%3Cline%20x1%3D%22%24%7Bx1%7D%22%20y1%3D%22%24%7By1%7D%22%20x2%3D%22%24%7Bx2%7D%22%20y2%3D%22%24%7By2%7D%22%20%0D%0A%09%09%09%09stroke%3D%22%24%7Bcolor%7D%22%20stroke-width%3D%22%24%7BstrokeWidth%7D%22%20/%3E%20%60%3B%0D%0A%09%09let%20tripleLineFunc%20%3D%20%28x1%2C%20y1%2C%20x2%2C%20y2%2C%20color%29%20%3D%3E%20%60%0D%0A%09%09%09%09%24%7BsingleLineFunc%28x1%2C%20y1%2C%20x2%2C%20y2%2C%20%22rgba%28255%2C0%2C0%2C0.4%29%22%29%7D%20%0D%0A%09%09%09%09%24%7BsingleLineFunc%28x1%2C%20y1%2C%20x2%2C%20y2%2C%20%22rgba%28255%2C255%2C255%2C0.15%29%22%29%7D%20%0D%0A%09%09%09%09%24%7BsingleLineFunc%28x1%2C%20y1%2C%20x2%2C%20y2%2C%20%22rgba%280%2C0%2C0%2C0.15%29%22%29%7D%20%0D%0A%09%09%09%60%3B%0D%0A%09%09let%20a%20%3D%20svgRectAbsolute%3B%0D%0A%09%09let%20svgStr%20%3D%20%0D%0A%09%09%09%60%3Csvg%20xmlns%3D%27http%3A//www.w3.org/2000/svg%27%20aria-hidden%3D%22true%22%20%0D%0A%09%09%09%09%09style%3D%22position%3A%20absolute%3B%20%0D%0A%09%09%09%09%09%09left%3A%20%24%7Ba.left%7Dpx%3B%20top%3A%20%24%7Ba.top%7Dpx%3B%20right%3A%20%24%7Ba.right%7Dpx%3B%20bottom%3A%20%24%7Ba.bottom%7Dpx%3B%20%0D%0A%09%09%09%09%09%09z-index%3A%209999%3B%20margin%3A%200px%3B%20pointer-events%3A%20none%3B%22%3E%20%0D%0A%09%09%09%09%24%7BtripleLineFunc%28guidelineRectRelative.left%2C%20guidelineRectRelative.top%2C%20%0D%0A%09%09%09%09%09elemBoundingRectRelative.left%2C%20elemBoundingRectRelative.top%2C%20%0D%0A%09%09%09%09%09%22rgba%28255%2C0%2C0%2C0.4%29%22%29%7D%20%0D%0A%09%09%09%09%24%7BtripleLineFunc%28guidelineRectRelative.right%2C%20guidelineRectRelative.top%2C%20%0D%0A%09%09%09%09%09elemBoundingRectRelative.right%2C%20elemBoundingRectRelative.top%2C%20%0D%0A%09%09%09%09%09%22rgba%28255%2C0%2C0%2C0.4%29%22%29%7D%20%0D%0A%09%09%09%09%24%7BtripleLineFunc%28guidelineRectRelative.right%2C%20guidelineRectRelative.bottom%2C%20%0D%0A%09%09%09%09%09elemBoundingRectRelative.right%2C%20elemBoundingRectRelative.bottom%2C%20%0D%0A%09%09%09%09%09%22rgba%28255%2C0%2C0%2C0.4%29%22%29%7D%20%0D%0A%09%09%09%09%24%7BtripleLineFunc%28guidelineRectRelative.left%2C%20guidelineRectRelative.bottom%2C%20%0D%0A%09%09%09%09%09elemBoundingRectRelative.left%2C%20elemBoundingRectRelative.bottom%2C%20%0D%0A%09%09%09%09%09%22rgba%28255%2C0%2C0%2C0.4%29%22%29%7D%20%0D%0A%09%09%09%3C/svg%3E%60%3B%0D%0A%09%09delete%20a%3B%0D%0A%09%09let%20svg%20%3D%20%28new%20DOMParser%28%29%29.parseFromString%28svgStr%2C%20%27image/svg%2Bxml%27%29%3B%0D%0A%09%09svg%20%3D%20svg.documentElement%3B%0D%0A%09%09return%20svg%3B%0D%0A%09%7D%0D%0A%0D%0A%0D%0A%09function%20makeElemBoundingRectDecorationElem%28elemBoundingRect_%29%20%7B%0D%0A%09%09let%20rect%20%3D%20elemBoundingRect_%3B%0D%0A%09%09let%20left%20%3D%20rect.left%2Bwindow.scrollX%2C%20top%20%3D%20rect.top%2Bwindow.scrollY%3B%0D%0A%09%09let%20right%20%3D%20rect.right%2Bwindow.scrollX-1%2C%20bottom%20%3D%20rect.bottom%2Bwindow.scrollY-1%3B%0D%0A%09%09let%20strokeWidth%20%3D%201%3B%0D%0A%09%09let%20singleRectSvgStrFunc%20%3D%20%28color%29%20%3D%3E%20%60%3Crect%20x%3D%22%24%7BstrokeWidth/2%7D%22%20y%3D%22%24%7BstrokeWidth/2%7D%22%20%0D%0A%09%09%09%09width%3D%22%24%7Brect.width-1%7D%22%20height%3D%22%24%7Brect.height-1%7D%22%20%0D%0A%09%09%09%09stroke%3D%22%24%7Bcolor%7D%22%20stroke-width%3D%22%24%7BstrokeWidth%7D%22%20fill%3D%22transparent%22%20/%3E%20%60%3B%0D%0A%09%09let%20svgStr%20%3D%20%0D%0A%09%09%09%60%3Csvg%20xmlns%3D%27http%3A//www.w3.org/2000/svg%27%20aria-hidden%3D%22true%22%20%0D%0A%09%09%09%09%09style%3D%22position%3A%20absolute%3B%20%0D%0A%09%09%09%09%09%09left%3A%20%24%7Bleft%7Dpx%3B%20top%3A%20%24%7Btop%7Dpx%3B%20right%3A%20%24%7Bright%7Dpx%3B%20bottom%3A%20%24%7Bbottom%7Dpx%3B%20%0D%0A%09%09%09%09%09%09z-index%3A%209999%3B%20margin%3A%200px%3B%20pointer-events%3A%20none%3B%22%3E%20%0D%0A%09%09%09%09%24%7BsingleRectSvgStrFunc%28%22rgba%28255%2C0%2C0%2C0.4%29%22%29%7D%20%0D%0A%09%09%09%09%24%7BsingleRectSvgStrFunc%28%22rgba%28255%2C255%2C255%2C0.15%29%22%29%7D%20%0D%0A%09%09%09%09%24%7BsingleRectSvgStrFunc%28%22rgba%280%2C0%2C0%2C0.15%29%22%29%7D%20%0D%0A%09%09%09%3C/svg%3E%60%3B%0D%0A%0D%0A%09%09let%20svg%20%3D%20%28new%20DOMParser%28%29%29.parseFromString%28svgStr%2C%20%27image/svg%2Bxml%27%29%3B%0D%0A%09%09svg%20%3D%20svg.documentElement%3B%0D%0A%09%09return%20svg%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20getDoubleShapeSvgStr%28singleShapeFunc__%2C%20...args__%29%20%7B%0D%0A%09%09return%20%60%0D%0A%09%09%09%09%24%7BsingleShapeFunc__%28...args__%2C%20%22rgba%28255%2C255%2C255%2C0.5%29%22%29%7D%20%0D%0A%09%09%09%09%24%7BsingleShapeFunc__%28...args__%2C%20%22rgba%280%2C0%2C0%2C0.5%29%22%29%7D%20%0D%0A%09%09%09%60%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20getMouseCursorUnitsDisplaySvgStr%28squareSideLen_%29%20%7B%0D%0A%09%09function%20getSingleSvgStr%28color__%29%20%7B%0D%0A%09%09%09let%20strokeWidth%20%3D%201%2C%20w2%20%3D%20strokeWidth/2%3B%0D%0A%09%09%09let%20x1%20%3D%20squareSideLen_%2A1.1%2C%20x2%20%3D%20squareSideLen_%2Bw2%3B%0D%0A%09%09%09let%20x3%20%3D%20squareSideLen_%2A1.9%2C%20x4%20%3D%20squareSideLen_%2A2-w2%3B%0D%0A%09%09%09let%20y1%20%3D%20squareSideLen_%2A0.5%2C%20y2%20%3D%20squareSideLen_-1%3B%0D%0A%09%09%09return%20%60%0D%0A%09%09%09%09%3Ctext%20x%3D%22%24%7BsquareSideLen_%2A1.5%7D%22%20y%3D%22%24%7BsquareSideLen_/2%7D%22%20%0D%0A%09%09%09%09%09font-family%3D%22Arial%22%20font-size%3D%229%22%20fill%3D%22%24%7Bcolor__%7D%22%20%0D%0A%09%09%09%09%09text-anchor%3D%22middle%22%20alignment-baseline%3D%22middle%22%20style%3D%22font-weight%3A%20bold%3B%22%20%3E%20%0D%0A%09%09%09%09%09%24%7BsquareSideLen_%7Dpx%20%0D%0A%09%09%09%09%3C/text%3E%0D%0A%09%09%09%09%3Cpolyline%20points%3D%22%24%7Bx1%7D%2C%24%7By1%7D%20%24%7Bx2%7D%2C%24%7By1%7D%20%24%7Bx2%7D%2C%24%7By2%7D%20%22%20%0D%0A%09%09%09%09%09%09fill%3D%22none%22%20stroke%3D%22%24%7Bcolor__%7D%22%20stroke-width%3D%22%24%7BstrokeWidth%7D%22%20/%3E%0D%0A%09%09%09%09%3Cpolyline%20points%3D%22%24%7Bx3%7D%2C%24%7By1%7D%20%24%7Bx4%7D%2C%24%7By1%7D%20%24%7Bx4%7D%2C%24%7By2%7D%20%22%20%0D%0A%09%09%09%09%09%09fill%3D%22none%22%20stroke%3D%22%24%7Bcolor__%7D%22%20stroke-width%3D%22%24%7BstrokeWidth%7D%22%20/%3E%0D%0A%09%09%09%60%3B%0D%0A%09%09%7D%0D%0A%09%09let%20r%20%3D%20getDoubleShapeSvgStr%28getSingleSvgStr%29%3B%0D%0A%09%09return%20r%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20drawMouseCursor%28parentElemForEverythingWeCreate_%2C%20showUnits_%29%20%7B%0D%0A%09%09let%20squareSideLen%20%3D%2024%3B%0D%0A%09%09let%20radius%20%3D%20squareSideLen/2%3B%0D%0A%09%09let%20maskId%20%3D%20%60bookmarklet_%24%7BUNIQUE_ID_FOR_THIS_BOOKMARKLET%7D_mouse_cursor_circular_cutout_mask%60%3B%0D%0A%09%09%0D%0A%09%09let%20svgWidth%20%3D%20squareSideLen%2A3%2C%20svgHeight%20%3D%20squareSideLen%2A3%3B%0D%0A%09%09function%20getSingleSquareWithCircularCutoutSvgStr%28color__%29%20%7B%0D%0A%09%09%09let%20x%20%3D%20squareSideLen%2C%20y%20%3D%20squareSideLen%2C%20width%20%3D%20squareSideLen%2B1%2C%20height%20%3D%20squareSideLen%2B1%3B%0D%0A%09%09%20%09let%20r%20%3D%20%60%0D%0A%09%09%09%09%3Crect%20x%3D%22%24%7Bx%7D%22%20y%3D%22%24%7By%7D%22%20rx%3D%220%22%20ry%3D%220%22%20%0D%0A%09%09%09%09%09width%3D%22%24%7Bwidth%7D%22%20height%3D%22%24%7Bheight%7D%22%20%0D%0A%09%09%09%09%09fill%3D%22%24%7Bcolor__%7D%22%20mask%3D%22url%28%23%24%7BmaskId%7D%29%22%20/%3E%0D%0A%09%09%09%09%60%3B%0D%0A%09%09%09return%20r%3B%0D%0A%09%09%7D%0D%0A%0D%0A%09%09/%2A%20%5E%5E%20using%20two%20rects%20instead%20of%20one%20because%20this%20way%20it%20shows%20up%20well%20on%20top%20of%20both%20%0D%0A%09%09black%20and%20white.%20%20I%20don%27t%20know%20why%20that%20works%2C%20but%20it%20does.%20%20we%20do%20this%20with%20our%20%0D%0A%09%09element%20decorations%20too.%20%2A/%0D%0A%0D%0A%09%09let%20centerPtRelative%20%3D%20%7Bx%3A%20svgWidth/2%2C%20y%3A%20svgHeight/2%7D%3B%0D%0A%09%09let%20svgMarkup%20%3D%20%60%0D%0A%09%09%09%3Csvg%20width%3D%22%24%7BsvgWidth%7D%22%20height%3D%22%24%7BsvgHeight%7D%22%20%0D%0A%09%09%09%09%09xmlns%3D%27http%3A//www.w3.org/2000/svg%27%20%3E%20%0D%0A%0D%0A%09%09%09%09%3Cdefs%3E%0D%0A%09%09%09%09%09%3Cmask%20id%3D%22%24%7BmaskId%7D%22%3E%0D%0A%09%09%09%09%09%09%3Crect%20x%3D%22%24%7BsquareSideLen%7D%22%20y%3D%22%24%7BsquareSideLen%7D%22%20%0D%0A%09%09%09%09%09%09%09width%3D%22%24%7BsquareSideLen%7D%22%20height%3D%22%24%7BsquareSideLen%7D%22%20fill%3D%22white%22/%3E%0D%0A%09%09%09%09%09%09%3Ccircle%20r%3D%22%24%7Bradius%7D%22%20cx%3D%22%24%7BsquareSideLen%2Bradius%7D%22%20cy%3D%22%24%7BsquareSideLen%2Bradius%7D%22%20%0D%0A%09%09%09%09%09%09%09fill%3D%22black%22/%3E%0D%0A%09%09%09%09%09%3C/mask%3E%0D%0A%09%09%09%09%3C/defs%3E%0D%0A%09%09%09%09%24%7BgetDoubleShapeSvgStr%28getSingleSquareWithCircularCutoutSvgStr%29%7D%20%0D%0A%09%09%09%09%24%7BshowUnits_%20%3F%20getMouseCursorUnitsDisplaySvgStr%28squareSideLen%29%20%3A%20%22%22%7D%0D%0A%09%09%09%3C/svg%3E%60%3B%0D%0A%0D%0A%09%09let%20cursorElem%20%3D%20document.createElement%28%27div%27%29%3B%0D%0A%09%09cursorElem.innerHTML%20%3D%20svgMarkup%3B%0D%0A%09%09cursorElem.style.position%20%3D%20%27absolute%27%3B%0D%0A%09%09cursorElem.style.zIndex%20%3D%20%27999999%27%3B%0D%0A%09%09cursorElem.style.pointerEvents%20%3D%20%27none%27%3B%0D%0A%0D%0A%09%09parentElemForEverythingWeCreate_.appendChild%28cursorElem%29%3B%0D%0A%0D%0A%09%09function%20setMouseCursorPos%28x_%2C%20y_%29%20%7B%0D%0A%09%09%09/%2A%20this%20is%20comment%2093a9bc2f-4da0-431e-88a5-5997d0c01fc6%3A%20%0D%0A%09%09%09rounding%20to%20ints%20here%20because%20e_.pageX%20/%20e_.pageY%20are%20always%20ints%20apparently%2C%20%0D%0A%09%09%09even%20though%20I%20read%20specs%20that%20say%20they%20are%20floats.%20%20we%20want%20our%20mouse%20cursor%20to%20%0D%0A%09%09%09line%20up%20exactly%20with%20our%20decorations%2C%20if%20the%20user%20moves%20the%20mouse%20cursor%20over%20%0D%0A%09%09%09a%20decoration.%20%20so%20we%20round%20the%20position%20of%20both%20our%20mouse%20cursor%20and%20our%20%0D%0A%09%09%09decorations%20to%20ints.%20%2A/%0D%0A%09%09%09let%20left%20%3D%20Math.round%28x_%20-%20%28svgWidth/2%20%2B%201%29%29%3B%0D%0A%09%09%09let%20top%20%3D%20Math.round%28y_%20-%20%28svgHeight/2%20%2B%201.5%29%29%3B%0D%0A%09%09%09cursorElem.style.left%20%3D%20%60%24%7Bleft%7Dpx%60%3B%0D%0A%09%09%09cursorElem.style.top%20%3D%20%60%24%7Btop%7Dpx%60%3B%0D%0A%09%09%7D%0D%0A%0D%0A%09%09let%20mouseMoveListener%20%3D%20function%28e_%29%20%7B%0D%0A%09%09%09setMouseCursorPos%28e_.pageX%2C%20e_.pageY%29%3B%0D%0A%09%09%09bookmarkletVars.lastKnownMousePos%20%3D%20%7Bx%3A%20e_.pageX%2C%20y%3A%20e_.pageY%7D%3B%0D%0A%09%09%7D%3B%0D%0A%09%09addEventListener%28document%2C%20%27mousemove%27%2C%20mouseMoveListener%29%3B%0D%0A%0D%0A%09%09/%2A%20This%20might%20be%20more%20trouble%20that%20it%27s%20worth.%20%2A/%0D%0A%09%09if%28false%29%20%7B%0D%0A%09%09%09let%20mouseWheelListener%20%3D%20function%28e_%29%20%7B%0D%0A%09%09%09%09/%2A%20this%20isn%27t%20perfect.%20%20eg.%20when%20you%27re%20near%20the%20top%20or%20bottom%20of%20the%20page.%20%2A/%0D%0A%09%09%09%09let%20x%20%3D%20e_.pageX%2Be_.deltaX%2C%20y%20%3D%20e_.pageY%2Be_.deltaY%3B%0D%0A%09%09%09%09setMouseCursorPos%28x%2C%20y%29%3B%0D%0A%09%09%09%09bookmarkletVars.lastKnownMousePos%20%3D%20%7Bx%2C%20y%7D%3B%0D%0A%09%09%09%7D%3B%0D%0A%09%09%09addEventListener%28document%2C%20%27wheel%27%2C%20mouseWheelListener%29%3B%0D%0A%09%09%7D%0D%0A%0D%0A%0D%0A%09%09/%2A%20Doing%20this%20so%20that%20if%20you%27re%20re-running%20this%20bookmarklet%20a%20lot%20via%20the%20keyboard%20%0D%0A%09%09shortcut%20and%20you%20have%20decorations%20turned%20off%20%28or%20there%20isn%27t%20anything%20in%20the%20viewport%20%0D%0A%09%09to%20decorate%29%2C%20you%27ll%20still%20see%20our%20mouse%20cursor%20appear%20and%20disappear.%20%20you%20won%27t%20need%20%0D%0A%09%09to%20jog%20it%20in%20order%20to%20see%20it.%20%20we%20save%20you%20the%20trouble%2C%20so%20that%20you%20know%20that%20this%20%0D%0A%09%09bookmarklet%20is%20working.%20%2A/%0D%0A%09%09if%28bookmarkletVars.lastKnownMousePos%20%21%3D%3D%20undefined%29%20%7B%0D%0A%09%09%09setMouseCursorPos%28bookmarkletVars.lastKnownMousePos.x%2C%20%0D%0A%09%09%09%09bookmarkletVars.lastKnownMousePos.y%29%3B%0D%0A%09%09%7D%0D%0A%09%7D%0D%0A%0D%0A%09function%20redraw%28%29%20%7B%0D%0A%09%09erase%28%29%3B%0D%0A%09%09draw%28%29%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20draw%28%29%20%7B%0D%0A%09%09let%20parentElemForEverythingWeCreate%20%3D%20document.createElement%28%27div%27%29%3B%0D%0A%09%09addEraseMarkerToElem%28parentElemForEverythingWeCreate%29%3B%0D%0A%09%09document.body.appendChild%28parentElemForEverythingWeCreate%29%3B%0D%0A%0D%0A%09%09if%28ENABLE_MENU%20%26%26%20bookmarkletVars.optionNameToValue%5B%22show-menu%22%5D%29%20%7B%0D%0A%09%09%09drawMenu%28parentElemForEverythingWeCreate%29%3B%0D%0A%09%09%7D%0D%0A%0D%0A%09%09if%28ENABLE_MOUSE_CURSOR%20%26%26%20bookmarkletVars.optionNameToValue%5B%22on-off%22%5D%20%26%26%20%0D%0A%09%09%09%09bookmarkletVars.optionNameToValue%5B%22enable-mouse-cursor%22%5D%29%20%7B%0D%0A%09%09%09let%20showUnits%20%3D%20bookmarkletVars.optionNameToValue%5B%22mouse-cursor-show-units%22%5D%3B%0D%0A%09%09%09drawMouseCursor%28parentElemForEverythingWeCreate%2C%20showUnits%29%3B%0D%0A%09%09%7D%0D%0A%0D%0A%09%09if%28ENABLE_DECORATIONS%20%26%26%20bookmarkletVars.optionNameToValue%5B%22on-off%22%5D%20%26%26%20%0D%0A%09%09%09%09bookmarkletVars.optionNameToValue%5B%22enable-element-decorations%22%5D%29%20%7B%0D%0A%09%09%09let%20drawDiagonals%20%3D%20bookmarkletVars.optionNameToValue%5B%22enable-element-decorations-diagonals%22%5D%3B%0D%0A%09%09%09drawAllDecorations%28parentElemForEverythingWeCreate%2C%20drawDiagonals%29%3B%0D%0A%09%09%7D%0D%0A%09%7D%0D%0A%0D%0A%09function%20makeMenuExpandedViewStyleStr%28%29%20%7B%0D%0A%09%09let%20r%20%3D%20%60position%3A%20fixed%3B%20top%3A%200%3B%20%0D%0A%09%09%09background%3A%20%23fff%3B%20border%3A%200.2vw%20solid%20black%20%3B%20%0D%0A%09%09%09padding%3A%200.2vw%3B%20z-index%3A%20999999%3B%20font-size%3A%201.5vw%20%3B%20%20%60%3B%0D%0A%09%09let%20position%20%3D%20%22top-left%22%3B%0D%0A%09%09if%28position%20%3D%3D%3D%20%22top-left%22%29%20%7B%0D%0A%09%09%09r%20%2B%3D%20%60left%3A%200%25%3B%20%20%60%3B%0D%0A%09%09%7D%20else%20if%28position%20%3D%3D%3D%20%22top-right%22%29%20%7B%0D%0A%09%09%09r%20%2B%3D%20%60left%3A%20100%25%3B%20transform%3A%20translateX%28-100%25%29%3B%20%20%60%3B%0D%0A%09%09%7D%20else%20if%28position%20%3D%3D%3D%20%22top-center%22%29%20%7B%0D%0A%09%09%09r%20%2B%3D%20%60left%3A%2050%25%3B%20transform%3A%20translateX%28-50%25%29%3B%20%20%60%3B%0D%0A%09%09%7D%20else%20%7B%0D%0A%09%09%09throw%20new%20Error%28%29%3B%0D%0A%09%09%7D%0D%0A%09%09return%20r%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20makeMenuCollapsedViewStyleStr%28%29%20%7B%0D%0A%09%09let%20r%20%3D%20%60position%3A%20fixed%3B%20top%3A%200%3B%20%0D%0A%09%09%09background%3A%20%23fff%3B%20border%3A%200.2vw%20solid%20black%20%3B%20%0D%0A%09%09%09padding%3A%200.2vw%3B%20z-index%3A%20999999%3B%20font-size%3A%201.5vw%20%3B%20%20%60%3B%0D%0A%09%09let%20position%20%3D%20%22top-left%22%3B%0D%0A%09%09if%28position%20%3D%3D%3D%20%22top-left%22%29%20%7B%0D%0A%09%09%09r%20%2B%3D%20%60left%3A%200%25%3B%20%20%60%3B%0D%0A%09%09%7D%20else%20if%28position%20%3D%3D%3D%20%22top-right%22%29%20%7B%0D%0A%09%09%09r%20%2B%3D%20%60left%3A%20100%25%3B%20transform%3A%20translateX%28-100%25%29%3B%20%20%60%3B%0D%0A%09%09%7D%20else%20if%28position%20%3D%3D%3D%20%22top-center%22%29%20%7B%0D%0A%09%09%09r%20%2B%3D%20%60left%3A%2050%25%3B%20transform%3A%20translateX%28-50%25%29%3B%20%20%60%3B%0D%0A%09%09%7D%20else%20%7B%0D%0A%09%09%09throw%20new%20Error%28%29%3B%0D%0A%09%09%7D%0D%0A%09%09return%20r%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20initMenuListeners%28expandedMenuRootElem_%2C%20collapsedMenuRootElem_%29%20%7B%0D%0A%09%09function%20onOptionCheckboxChanged%28optionName__%2C%20event__%29%20%7B%0D%0A%09%09%09bookmarkletVars.optionNameToValue%5BoptionName__%5D%20%3D%20event__.target.checked%3B%0D%0A%09%09%09redraw%28%29%3B%0D%0A%09%09%7D%0D%0A%09%09for%28let%20checkboxName%20of%20%5B%22enable-mouse-cursor%22%2C%20%22enable-element-decorations%22%2C%20%0D%0A%09%09%09%09%22on-off%22%2C%20%22enable-element-decorations-diagonals%22%2C%20%22mouse-cursor-show-units%22%5D%29%20%7B%0D%0A%09%09%09let%20checkbox%20%3D%20expandedMenuRootElem_.querySelector%28%60input%5Bname%3D%22%24%7BcheckboxName%7D%22%5D%60%29%3B%0D%0A%09%09%09checkbox.checked%20%3D%20%21%21bookmarkletVars.optionNameToValue%5BcheckboxName%5D%3B%0D%0A%09%09%09addEventListener%28checkbox%2C%20%22change%22%2C%20%0D%0A%09%09%09%09%28event%29%20%3D%3E%20onOptionCheckboxChanged%28checkboxName%2C%20event%29%29%3B%0D%0A%09%09%7D%0D%0A%0D%0A%09%09function%20onCloseButtonClicked%28%29%20%7B%0D%0A%09%09%09bookmarkletVars.optionNameToValue%5B%22show-menu%22%5D%20%3D%20false%3B%0D%0A%09%09%09redraw%28%29%3B%0D%0A%09%09%7D%0D%0A%09%09let%20closeButton%20%3D%20expandedMenuRootElem_.querySelector%28%60button%5Bname%3D%22close%22%5D%60%29%3B%0D%0A%09%09addEventListener%28closeButton%2C%20%22click%22%2C%20onCloseButtonClicked%29%3B%0D%0A%0D%0A%09%09function%20onCollapseButtonClicked%28%29%20%7B%0D%0A%09%09%09expandedMenuRootElem_.style.display%20%3D%20%27none%27%3B%0D%0A%09%09%09collapsedMenuRootElem_.style.display%20%3D%20%27block%27%3B%0D%0A%09%09%7D%0D%0A%09%09let%20collapseButton%20%3D%20expandedMenuRootElem_.querySelector%28%60button%5Bname%3D%22collapse%22%5D%60%29%3B%0D%0A%09%09addEventListener%28collapseButton%2C%20%22click%22%2C%20onCollapseButtonClicked%29%3B%0D%0A%0D%0A%0D%0A%09%09function%20onExpandButtonClicked%28%29%20%7B%0D%0A%09%09%09expandedMenuRootElem_.style.display%20%3D%20%27block%27%3B%0D%0A%09%09%09collapsedMenuRootElem_.style.display%20%3D%20%27none%27%3B%0D%0A%09%09%7D%0D%0A%09%09let%20expandButton%20%3D%20collapsedMenuRootElem_.querySelector%28%60button%5Bname%3D%22expand%22%5D%60%29%3B%0D%0A%09%09addEventListener%28expandButton%2C%20%22click%22%2C%20onExpandButtonClicked%29%3B%0D%0A%0D%0A%0D%0A%09%7D%0D%0A%0D%0A%09function%20drawMenu%28parentElemForEverythingWeCreate_%29%20%7B%0D%0A%09%09let%20expandedMenuRootElem%20%3D%20drawMenuExpandedView%28parentElemForEverythingWeCreate_%29%3B%0D%0A%09%09let%20collapsedMenuRootElem%20%3D%20drawMenuCollapsedView%28parentElemForEverythingWeCreate_%29%3B%0D%0A%09%09initMenuListeners%28expandedMenuRootElem%2C%20collapsedMenuRootElem%29%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20drawMenuCollapsedView%28parentElemForEverythingWeCreate_%29%20%7B%0D%0A%09%09let%20rootElem%20%3D%20document.createElement%28%27div%27%29%3B%0D%0A%09%09parentElemForEverythingWeCreate_.appendChild%28rootElem%29%3B%0D%0A%09%09rootElem.style%20%3D%20makeMenuCollapsedViewStyleStr%28%29%3B%0D%0A%09%09rootElem.style.display%20%3D%20%27none%27%3B%0D%0A%09%09rootElem.innerHTML%20%3D%20%60%20%0D%0A%09%09%09%3Cbutton%20name%3D%22expand%22%20title%3D%22expand%22%20aria-label%3D%22expand%22%20%0D%0A%09%09%09%09%09style%3D%22float%3A%20right%3B%20margin%3A%200.2vw%3B%20z-index%3A%2010%3B%20font-size%3A%201.0vw%20%3B%20%0D%0A%09%09%09%09%09%09border-width%3A%200.3vw%3B%20padding%3A%200.3vw%3B%20margin%3A%200.1vw%22%20%0D%0A%09%09%09%09%3E%E2%96%BC%3C/button%3E%0D%0A%09%09%09%60%3B%0D%0A%09%09return%20rootElem%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20getOpenInNewTabIconSvgStr%28%29%20%7B%0D%0A%09%09let%20r%20%3D%20%60%3Csvg%20width%3D%221.5vw%22%20version%3D%221.1%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20%0D%0A%09%09%09%09xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20viewBox%3D%220%200%2024%2024%22%3E%20%0D%0A%09%09%09%3Cg%20fill%3D%22%233C485E%22%3E%20%0D%0A%09%09%09%09%3Cpath%20d%3D%22M2.3%2C3.5C1%2C3.5%2C0%2C4.5%2C0%2C5.8v15.9C0%2C23%2C1%2C24%2C2.3%2C24h15.9c1.3%2C0%2C2.3-1%2C2.3-2.3v-6.8l-2.3-2.3v9.1H2.3V5.8h9.1%20L9.1%2C3.5H2.3z%22/%3E%20%0D%0A%09%09%09%09%3Cpolygon%20points%3D%2216%2C0%2019.1%2C3%2010.5%2C11.6%2012.4%2C13.5%2021%2C4.9%2024%2C8%2024%2C0%20%22/%3E%20%0D%0A%09%09%09%3C/g%3E%20%0D%0A%09%09%3C/svg%3E%60%3B%0D%0A%09%09return%20r%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20drawMenuExpandedView%28parentElemForEverythingWeCreate_%29%20%7B%0D%0A%09%09let%20rootElem%20%3D%20document.createElement%28%27div%27%29%3B%0D%0A%09%09parentElemForEverythingWeCreate_.appendChild%28rootElem%29%3B%0D%0A%09%09rootElem.style%20%3D%20makeMenuExpandedViewStyleStr%28%29%3B%0D%0A%0D%0A%09%09rootElem.innerHTML%20%3D%20%60%20%0D%0A%09%09%09%3Cdiv%3E%0D%0A%09%09%09%09%3Clabel%3E%0D%0A%09%09%09%09%09%3Cinput%20type%3D%22checkbox%22%20title%3D%22On/Off%22%20%0D%0A%09%09%09%09%09%09name%3D%22on-off%22%20style%3D%22width%3A%203vw%3B%20height%3A%203vw%3B%20%0D%0A%09%09%09%09%09%09%09padding%3A%200%3B%20margin%3A%200%22%3E%0D%0A%09%09%09%09%09%3Cstrong%3EON/OFF%3C/strong%3E%0D%0A%09%09%09%09%3C/label%3E%0D%0A%09%09%09%09%26nbsp%3B%26nbsp%3B%26nbsp%3B%0D%0A%09%09%09%09%3Cbutton%20name%3D%22refresh%22%20title%3D%22refresh%22%20aria-label%3D%22refresh%22%20%20%0D%0A%09%09%09%09%09%09style%3D%22width%3A%203vw%3B%20height%3A%203vw%3B%20padding%3A%200.1vw%3B%20border-width%3A%200.1vw%22%3E%0D%0A%09%09%09%09%09%3Csvg%20style%3D%22width%3A%20100%25%3B%20height%3A%20100%25%3B%20display%3A%20block%3B%20padding%3A%200%3B%20%22%20%0D%0A%09%09%09%09%09%09%09viewBox%3D%220%200%2024%2024%22%20fill%3D%22currentColor%22%3E%0D%0A%09%09%09%09%09%09%3Cpath%20d%3D%22M19%2C8%20L15%2C12%20L18%2C12%20C18%2C15.31%2015.31%2C18%2012%2C18%20C10.99%2C18%2010.03%2C17.75%209.2%2C17.3%20L7.74%2C18.76%20C8.97%2C19.54%2010.43%2C20%2012%2C20%20C16.42%2C20%2020%2C16.42%2020%2C12%20L23%2C12%20L19%2C8%20Z%20M6%2C12%20C6%2C8.69%208.69%2C6%2012%2C6%20C13.01%2C6%2013.97%2C6.25%2014.8%2C6.7%20L16.26%2C5.24%20C15.03%2C4.46%2013.57%2C4%2012%2C4%20C7.58%2C4%204%2C7.58%204%2C12%20L1%2C12%20L5%2C16%20L9%2C12%20L6%2C12%20Z%22/%3E%0D%0A%09%09%09%09%09%3C/svg%3E%0D%0A%09%09%09%09%3C/button%3E%26nbsp%3B%26nbsp%3B%0D%0A%09%09%09%09%3Ca%20data-name%3D%22link-about%22%20href%3D%22%23%22%3EAbout%20%24%7BgetOpenInNewTabIconSvgStr%28%29%7D%3C/a%3E%26nbsp%3B%26nbsp%3B%0D%0A%09%09%09%09%3Cbutton%20name%3D%22close%22%20title%3D%22close%22%20aria-label%3D%22close%22%20%0D%0A%09%09%09%09%09%09style%3D%22float%3A%20right%3B%20margin%3A%200.2vw%3B%20z-index%3A%2010%3B%20font-size%3A%201.0vw%20%3B%20%0D%0A%09%09%09%09%09%09%09border-width%3A%200.3vw%3B%20padding%3A%200.3vw%3B%20margin%3A%200.1vw%22%20%0D%0A%09%09%09%09%09%3E%E2%9C%96%3C/button%3E%0D%0A%09%09%09%09%3Cbutton%20name%3D%22collapse%22%20title%3D%22collapse%22%20aria-label%3D%22collapse%22%20%0D%0A%09%09%09%09%09%09style%3D%22float%3A%20right%3B%20margin%3A%200.2vw%3B%20z-index%3A%2010%3B%20font-size%3A%201.0vw%20%3B%0D%0A%09%09%09%09%09%09%09border-width%3A%200.3vw%3B%20padding%3A%200.3vw%3B%20margin%3A%200.1vw%22%20%0D%0A%09%09%09%09%09%3E%E2%96%B2%3C/button%3E%0D%0A%09%09%09%09%3Cbr%3E%0D%0A%09%09%09%09%3Clabel%3E%0D%0A%09%09%09%09%09%3Cinput%20type%3D%22checkbox%22%20name%3D%22enable-mouse-cursor%22%20%0D%0A%09%09%09%09%09%09style%3D%22width%3A%201.5vw%3B%20height%3A%201.5vw%3B%20border-width%3A%200.1vw%3B%20padding%3A%200%3B%20margin%3A%200%22%20%20%3E%20%0D%0A%09%09%09%09%09Enable%20mouse%20cursor%0D%0A%09%09%09%09%3C/label%3E%20%0D%0A%09%09%09%09%3Cbr%3E%20%0D%0A%09%09%09%09%3Clabel%20style%3D%22padding-left%3A%201em%3B%22%3E%0D%0A%09%09%09%09%09%3Cinput%20type%3D%22checkbox%22%20name%3D%22mouse-cursor-show-units%22%20%0D%0A%09%09%09%09%09%09style%3D%22width%3A%201.5vw%3B%20height%3A%201.5vw%3B%20border-width%3A%200.1vw%3B%20padding%3A%200%3B%20margin%3A%200%22%20%20%3E%20%0D%0A%09%09%09%09%09Show%20units%20%0D%0A%09%09%09%09%3C/label%3E%20%0D%0A%09%09%09%09%3Cbr%3E%0D%0A%09%09%09%09%3Clabel%3E%0D%0A%09%09%09%09%09%3Cinput%20type%3D%22checkbox%22%20name%3D%22enable-element-decorations%22%20%0D%0A%09%09%09%09%09%09style%3D%22width%3A%201.5vw%3B%20height%3A%201.5vw%3B%20border-width%3A%200.1vw%3B%20padding%3A%200%3B%20margin%3A%200%22%20%20%3E%20%0D%0A%09%09%09%09%09Enable%20element%20decorations%0D%0A%09%09%09%09%3C/label%3E%0D%0A%09%09%09%09%3Cbr%3E%20%0D%0A%09%09%09%09%3Clabel%20style%3D%22padding-left%3A%201em%3B%22%3E%0D%0A%09%09%09%09%09%3Cinput%20type%3D%22checkbox%22%20name%3D%22enable-element-decorations-diagonals%22%20%0D%0A%09%09%09%09%09%09style%3D%22width%3A%201.5vw%3B%20height%3A%201.5vw%3B%20border-width%3A%200.1vw%3B%20padding%3A%200%3B%20margin%3A%200%22%20%20%3E%20%0D%0A%09%09%09%09%09Draw%20diagonal%20lines%0D%0A%09%09%09%09%3C/label%3E%20%0D%0A%09%09%09%3C/div%3E%0D%0A%09%09%60%3B%0D%0A%09%09addLinkAboutButtonListener%28rootElem%2C%20%22link-about%22%29%3B%0D%0A%09%09addRefreshButtonListener%28rootElem%2C%20%22refresh%22%29%3B%0D%0A%0D%0A%09%09return%20rootElem%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20addRefreshButtonListener%28menuRootElem_%2C%20dataNameOfButton_%29%20%7B%0D%0A%09%09function%20listener%28%29%20%7B%0D%0A%09%09%09redraw%28%29%3B%0D%0A%09%09%7D%0D%0A%09%09let%20button%20%3D%20menuRootElem_.querySelector%28%60button%5Bname%3D%27%24%7BdataNameOfButton_%7D%27%5D%60%29%3B%0D%0A%09%09addEventListener%28button%2C%20%22click%22%2C%20listener%29%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20addLinkAboutButtonListener%28menuRootElem_%2C%20dataNameOfLink_%29%20%7B%0D%0A%09%09function%20listener%28%29%20%7B%0D%0A%09%09%09let%20aboutPageHtmlContent%20%3D%20%60%3C%21DOCTYPE%20html%3E%0D%0A%09%09%09%09%3Chtml%3E%0D%0A%09%09%09%09%09%3Chead%3E%0D%0A%09%09%09%09%09%09%3Ctitle%3EAbout%20this%20bookmarklet%3C/title%3E%0D%0A%09%09%09%09%09%3C/head%3E%0D%0A%09%09%09%09%09%3Cbody%3E%0D%0A%09%09%09%09%09%09%3Ch1%3EAbout%20this%20bookmarklet%3C/h1%3E%0D%0A%09%09%09%09%09%09%3Cp%3EKeyboard%20shorctut%3A%20alt%2Br%20will%20refresh.%3Cbr%3E%0D%0A%09%09%09%09%09%09%3Cp%3E%3Ca%20href%3D%22https%3A//dan-tripp-siteimprove.github.io/wcag-target-size-bookmarklet/index.html%22%3EMore%20info%20and%20releases%3C/a%3E.%3C/p%3E%0D%0A%09%09%09%09%09%3C/body%3E%0D%0A%09%09%09%09%3C/html%3E%60%3B%0D%0A%09%09%09let%20newTab%20%3D%20window.open%28%29%3B%0D%0A%09%09%09newTab.document.write%28aboutPageHtmlContent%29%3B%0D%0A%09%09%09newTab.document.close%28%29%3B%0D%0A%09%09%09/%2A%20%5E%5E%20chatgpt%20says%3A%20This%20is%20important%20to%20properly%20render%20the%20new%20page%20%2A/%0D%0A%09%09%7D%0D%0A%09%09let%20linkElem%20%3D%20menuRootElem_.querySelector%28%60a%5Bdata-name%3D%27%24%7BdataNameOfLink_%7D%27%5D%60%29%3B%0D%0A%09%09addEventListener%28linkElem%2C%20%22click%22%2C%20listener%29%3B%0D%0A%09%7D%0D%0A%0D%0A%7D%29%28bookmarkletVars_9c277bdd_ef7d_4030_a1a3_da6b2dbcf8a6%20%7C%7C%20%28bookmarkletVars_9c277bdd_ef7d_4030_a1a3_da6b2dbcf8a6%20%3D%20%7B%7D%29%29%3B%0D%0A
">WCAG target size bookmarklet v0.3</a> ← drag this link to your bookmarks toolbar to install this version of the bookmarklet.<br>
	<br>
	Changes since version v0.2:
		<ul>
			<li>Bug fix: Decorations - Now ignoring any element with opacity == 0.</li>
			<li>Adding an 'About' page to the menu.</li>
			<li>Menu - Adding an "On/Off" checkbox. Re-running the bookmarklet will now do nothing.</li>
			<li>Adding a "Refresh" button to the menu.</li>
			<li>Bug fix: Menu - Preventing resizing of the menu checkboxes/buttons with zoom. Mostly.</li>
			<li>Bug fix: Mouse cursor and element decorations now line up exactly, thanks to rounding.</li>
			<li>Element decorations - Adding diagonal lines.</li>
			<li>Mouse cursor - Adding "Show Units" option. (i.e., "24px").</li>
		</ul>
	</li>
	

	<li>
			<h3>Version v0.2 (2023-11-10)</h3> <a href="javascript:%0D%0Avar%20bookmarkletVars_9c277bdd_ef7d_4030_a1a3_da6b2dbcf8a6%3B%0D%0A%28async%20function%20%28bookmarkletVars%29%20%7B%0D%0A%0D%0A%09let%20ENABLE_DECORATIONS%20%3D%20true%2C%20ENABLE_MOUSE_CURSOR%20%3D%20true%2C%20ENABLE_MENU%20%3D%20true%3B%0D%0A%0D%0A%09let%20UNIQUE_ID_FOR_THIS_BOOKMARKLET%20%3D%20%279c277bdd_ef7d_4030_a1a3_da6b2dbcf8a6%27%3B%0D%0A%09%0D%0A%09let%20ERASE_MARKER_DATA_ATTRIBUTE%20%3D%20%60data-bookmarklet-%24%7BUNIQUE_ID_FOR_THIS_BOOKMARKLET%7D-erase-marker%60%3B%0D%0A%0D%0A%09function%20doFirstRunJobs%28%29%20%7B%0D%0A%09%09bookmarkletVars.ourListenersAndTheirElemsAndEventTypes%20%3D%20%5B%5D%3B%0D%0A%09%09bookmarkletVars.optionNameToValue%20%3D%20%7B%7D%3B%0D%0A%09%09bookmarkletVars.optionNameToValue%5B%22enable-mouse-cursor%22%5D%20%3D%20true%3B%0D%0A%09%09bookmarkletVars.optionNameToValue%5B%22enable-element-decorations%22%5D%20%3D%20true%3B%0D%0A%09%09bookmarkletVars.optionNameToValue%5B%22show-menu%22%5D%20%3D%20true%3B%0D%0A%09%09addKeyListenerForReRun%28%29%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20run%28%29%20%7B%0D%0A%09%09toggleState%28%29%3B%0D%0A%09%09drawOrEraseAsAppropriateBasedOnState%28%29%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20refresh%28%29%20%7B%0D%0A%09%09runTwice%28%29%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20runTwice%28%29%20%7B%0D%0A%09%09run%28%29%3B%0D%0A%09%09run%28%29%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20addKeyListenerForReRun%28%29%20%7B%0D%0A%09%09document.addEventListener%28%27keydown%27%2C%20function%28e%29%20%7B%0D%0A%09%09%09if%20%28e.altKey%20%26%26%20e.key%20%3D%3D%3D%20%27r%27%29%20%7B%0D%0A%09%09%09%09run%28%29%3B%0D%0A%09%09%09%7D%0D%0A%09%09%7D%2C%20false%29%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20toggleState%28%29%20%7B%0D%0A%09%09bookmarkletVars.toggleStateIsDrawAsOpposedToErase%20%3D%20%0D%0A%09%09%09%21bookmarkletVars.toggleStateIsDrawAsOpposedToErase%3B%0D%0A%09%7D%0D%0A%0D%0A%09if%28bookmarkletVars.toggleStateIsDrawAsOpposedToErase%20%3D%3D%3D%20undefined%29%20%7B%20/%2A%20first%20run%20%2A/%0D%0A%09%09doFirstRunJobs%28%29%3B%0D%0A%09%09bookmarkletVars.toggleStateIsDrawAsOpposedToErase%20%3D%20false%3B%0D%0A%09%7D%0D%0A%09%0D%0A%09function%20makeWrapperDiv%28%29%20%7B%0D%0A%09%09let%20r%20%3D%20document.createElement%28%27div%27%29%3B%0D%0A%09%09r.setAttribute%28%27style%27%2C%20%22position%3A%20relative%20%21important%3B%20margin%3A%200%20%21important%3B%20%22%2B%0D%0A%09%09%09%22padding%3A%200%20%21important%3B%22%29%3B%0D%0A%09%09return%20r%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20getCenterPtOfElem%28elem_%29%20%7B%0D%0A%09%09const%20rect%20%3D%20elem_.getBoundingClientRect%28%29%3B%0D%0A%09%09return%20%7B%0D%0A%09%09%09top%3A%20rect.top%20%2B%20window.scrollY%20%2B%20rect.height/2%2C%0D%0A%09%09%09left%3A%20rect.left%20%2B%20window.scrollX%20%2B%20rect.width/2%0D%0A%09%09%7D%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20make24CircleDecorationElem%28centerPt_%29%20%7B%0D%0A%09%09let%20circleDiam%20%3D%2024%3B%0D%0A%09%09let%20circleRadius%20%3D%20circleDiam/2%3B%0D%0A%0D%0A%09%09/%2A%20re%3A%20rounding%2C%20see%20note%2093a9bc2f-4da0-431e-88a5-5997d0c01fc6.%20%0D%0A%09%09maybe%20we%20should%20do%20that%20rounding%20here%20%28if%20it%27s%20even%20possible%29.%20but%20we%20don%27t.%20%0D%0A%09%09%2A/%0D%0A%0D%0A%09%09let%20left%20%3D%20centerPt_.left%20-%20circleRadius%2C%20top%20%3D%20centerPt_.top%20-%20circleRadius%3B%0D%0A%09%09let%20strokeWidth%20%3D%201%3B%0D%0A%09%09let%20singleCircleSvgStrFunc%20%3D%20%28color%29%20%3D%3E%20%60%3Ccircle%20cx%3D%22%24%7BcircleRadius%7D%22%20cy%3D%22%24%7BcircleRadius%7D%22%20%0D%0A%09%09%09r%3D%22%24%7BcircleRadius-strokeWidth/2%7D%22%20%0D%0A%09%09%09stroke%3D%22%24%7Bcolor%7D%22%20stroke-width%3D%22%24%7BstrokeWidth%7D%22%20fill%3D%22transparent%22%3E%3C/circle%3E%20%60%3B%0D%0A%09%09let%20svgStr%20%3D%20%0D%0A%09%09%09%60%3Csvg%20xmlns%3D%27http%3A//www.w3.org/2000/svg%27%20%0D%0A%09%09%09%09%09aria-hidden%3D%22true%22%20%0D%0A%09%09%09%09%09style%3D%22position%3A%20absolute%3B%20left%3A%20%24%7Bleft%7Dpx%3B%20top%3A%20%24%7Btop%7Dpx%3B%20%0D%0A%09%09%09%09%09%09width%3A%20%24%7BcircleDiam%7Dpx%3B%20height%3A%20%24%7BcircleDiam%7Dpx%3B%20z-index%3A%209999%3B%20margin%3A%200px%3B%20%0D%0A%09%09%09%09%09%09pointer-events%3A%20none%3B%22%3E%20%0D%0A%09%09%09%09%24%7BsingleCircleSvgStrFunc%28%22rgba%28255%2C0%2C0%2C0.4%29%22%29%7D%20%0D%0A%09%09%09%09%24%7BsingleCircleSvgStrFunc%28%22rgba%28255%2C255%2C255%2C0.15%29%22%29%7D%20%0D%0A%09%09%09%09%24%7BsingleCircleSvgStrFunc%28%22rgba%280%2C0%2C0%2C0.15%29%22%29%7D%20%0D%0A%09%09%09%3C/svg%3E%60%3B%0D%0A%0D%0A%09%09let%20r%20%3D%20%28new%20DOMParser%28%29%29.parseFromString%28svgStr%2C%20%27image/svg%2Bxml%27%29%3B%0D%0A%09%09r%20%3D%20r.documentElement%3B%0D%0A%09%09return%20r%3B%0D%0A%09%7D%0D%0A%0D%0A%0D%0A%09function%20make24SquareDecorationElem%28centerPt_%29%20%7B%0D%0A%09%09let%20squareSideLen%20%3D%2024%2C%20halfSquareSideLen%20%3D%20squareSideLen/2%3B%0D%0A%09%09%0D%0A%09%09/%2A%20re%3A%20rounding%2C%20see%20note%2093a9bc2f-4da0-431e-88a5-5997d0c01fc6.%20%0D%0A%09%09maybe%20we%20should%20do%20that%20rounding%20here%20%28if%20it%27s%20even%20possible%29.%20but%20we%20don%27t.%20%0D%0A%09%09%2A/%0D%0A%0D%0A%09%09let%20left%20%3D%20centerPt_.left%20-%20halfSquareSideLen%2C%20top%20%3D%20centerPt_.top%20-%20halfSquareSideLen%3B%0D%0A%09%09let%20strokeWidth%20%3D%201%3B%0D%0A%09%09let%20singleSquareSvgStrFunc%20%3D%20%28color%29%20%3D%3E%20%60%3Crect%20x%3D%22%24%7BstrokeWidth/2%7D%22%20y%3D%22%24%7BstrokeWidth/2%7D%22%20%0D%0A%09%09%09%09width%3D%22%24%7BsquareSideLen-strokeWidth%7D%22%20height%3D%22%24%7BsquareSideLen-strokeWidth%7D%22%20%0D%0A%09%09%09%09stroke%3D%22%24%7Bcolor%7D%22%20stroke-width%3D%22%24%7BstrokeWidth%7D%22%20fill%3D%22transparent%22%20/%3E%20%60%3B%0D%0A%09%09let%20svgStr%20%3D%20%0D%0A%09%09%09%60%3Csvg%20xmlns%3D%27http%3A//www.w3.org/2000/svg%27%20aria-hidden%3D%22true%22%20%0D%0A%09%09%09%09%09style%3D%22position%3A%20absolute%3B%20left%3A%20%24%7Bleft%7Dpx%3B%20top%3A%20%24%7Btop%7Dpx%3B%20%0D%0A%09%09%09%09%09%09width%3A%20%24%7BsquareSideLen%2B1%7Dpx%3B%20height%3A%20%24%7BsquareSideLen%2B1%7Dpx%3B%20z-index%3A%209999%3B%20%0D%0A%09%09%09%09%09%09margin%3A%200px%3B%20pointer-events%3A%20none%3B%22%3E%20%0D%0A%09%09%09%09%24%7BsingleSquareSvgStrFunc%28%22rgba%28255%2C0%2C0%2C0.4%29%22%29%7D%20%0D%0A%09%09%09%09%24%7BsingleSquareSvgStrFunc%28%22rgba%28255%2C255%2C255%2C0.15%29%22%29%7D%20%0D%0A%09%09%09%09%24%7BsingleSquareSvgStrFunc%28%22rgba%280%2C0%2C0%2C0.15%29%22%29%7D%20%0D%0A%09%09%09%3C/svg%3E%60%3B%0D%0A%09%09let%20r%20%3D%20%28new%20DOMParser%28%29%29.parseFromString%28svgStr%2C%20%27image/svg%2Bxml%27%29%3B%0D%0A%09%09r%20%3D%20r.documentElement%3B%0D%0A%09%09return%20r%3B%0D%0A%09%7D%0D%0A%09%0D%0A%09function%20doesElemHaveZeroWidthOrZeroHeight%28elem_%29%20%7B%0D%0A%09%09let%20rect%20%3D%20elem_.getBoundingClientRect%28%29%3B%0D%0A%09%09let%20r%20%3D%20rect.width%20%3D%3D%3D%200%20%7C%7C%20rect.height%20%3D%3D%3D%200%3B%0D%0A%09%09return%20r%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20isElemCompletelyClipped%28elem_%29%20%7B%0D%0A%09%09return%20doesElemHaveZeroWidthOrZeroHeight%28elem_%29%20%7C%7C%20%0D%0A%09%09%09isElemCompletelyClippedByAnyAncestor%28elem_%29%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20isElemCompletelyClippedByAnyAncestor%28elem_%29%20%7B%0D%0A%09%09let%20currentElement%20%3D%20elem_%3B%0D%0A%09%09while%20%28currentElement.parentElement%29%20%7B%0D%0A%09%09%09let%20parent%20%3D%20currentElement.parentElement%3B%0D%0A%0D%0A%09%09%09let%20computedStyle%20%3D%20getComputedStyle%28parent%29%3B%0D%0A%09%09%09if%20%28computedStyle.overflow%20%3D%3D%3D%20%27hidden%27%20%7C%7C%20computedStyle.overflowX%20%3D%3D%3D%20%27hidden%27%20%0D%0A%09%09%09%09%09%7C%7C%20computedStyle.overflowY%20%3D%3D%3D%20%27hidden%27%29%20%7B%0D%0A%0D%0A%09%09%09%09let%20parentRect%20%3D%20parent.getBoundingClientRect%28%29%3B%0D%0A%09%09%09%09let%20elementRect%20%3D%20elem_.getBoundingClientRect%28%29%3B%0D%0A%0D%0A%09%09%09%09if%20%28elementRect.bottom%20%3C%3D%20parentRect.top%20%7C%7C%20%0D%0A%09%09%09%09%09%09elementRect.top%20%3E%3D%20parentRect.bottom%20%7C%7C%20%0D%0A%09%09%09%09%09%09elementRect.right%20%3C%3D%20parentRect.left%20%7C%7C%20%0D%0A%09%09%09%09%09%09elementRect.left%20%3E%3D%20parentRect.right%29%20%7B%0D%0A%09%09%09%09%09return%20true%3B%0D%0A%09%09%09%09%7D%0D%0A%09%09%09%7D%0D%0A%09%09%09currentElement%20%3D%20parent%3B%0D%0A%09%09%7D%0D%0A%09%09return%20false%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20isElemVisible%28elem_%29%20%7B%0D%0A%09%09let%20r%20%3D%20true%3B%0D%0A%09%09let%20elemStyle%20%3D%20getComputedStyle%28elem_%29%3B%0D%0A%09%09if%28elemStyle.visibility%20%3D%3D%3D%20%27hidden%27%29%20%7B%0D%0A%09%09%09r%20%3D%20false%3B%0D%0A%09%09%7D%0D%0A%09%09if%28r%29%20%7B%0D%0A%09%09%09for%28let%20elemAncestor%20%3D%20elem_%3B%20elemAncestor%3B%20elemAncestor%20%3D%20elemAncestor.parentElement%29%20%7B%0D%0A%09%09%09%09if%28getComputedStyle%28elemAncestor%29.display%20%3D%3D%3D%20%27none%27%29%20%7B%0D%0A%09%09%09%09%09r%20%3D%20false%3B%0D%0A%09%09%09%09%09break%3B%0D%0A%09%09%09%09%7D%0D%0A%09%09%09%7D%0D%0A%09%09%7D%0D%0A%09%09if%28r%20%26%26%20isElemCompletelyClipped%28elem_%29%29%20%7B%0D%0A%09%09%09r%20%3D%20false%3B%0D%0A%09%09%7D%0D%0A%09%09return%20r%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20drawOrEraseAsAppropriateBasedOnState%28%29%20%7B%0D%0A%09%09if%28bookmarkletVars.toggleStateIsDrawAsOpposedToErase%29%20%7B%0D%0A%09%09%09draw%28%29%3B%0D%0A%09%09%7D%20else%20%7B%0D%0A%09%09%09erase%28%29%3B%0D%0A%09%09%7D%0D%0A%09%7D%0D%0A%0D%0A%09function%20removeAllElementsAddedByUs%28%29%20%7B%0D%0A%09%09for%28let%20e%20of%20document.querySelectorAll%28%60%5B%24%7BERASE_MARKER_DATA_ATTRIBUTE%7D%5D%60%29%29%20%7B%0D%0A%09%09%09e.parentElement.removeChild%28e%29%3B%0D%0A%09%09%7D%0D%0A%09%7D%0D%0A%0D%0A%09function%20erase%28%29%20%7B%0D%0A%09%09removeAllElementsAddedByUs%28%29%3B%0D%0A%09%09removeAllListenersAddedByUs%28%29%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20addEraseMarkerToElem%28elem_%29%20%7B%0D%0A%09%09elem_.setAttribute%28ERASE_MARKER_DATA_ATTRIBUTE%2C%20%27%27%29%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20addEventListener%28elem_%2C%20eventType_%2C%20listener_%29%20%7B%0D%0A%09%09elem_.addEventListener%28eventType_%2C%20listener_%29%3B%0D%0A%09%09addListenerToOurList%28listener_%2C%20elem_%2C%20eventType_%29%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20removeAllListenersAddedByUs%28%29%20%7B%0D%0A%09%09for%28let%20e%20of%20bookmarkletVars.ourListenersAndTheirElemsAndEventTypes%29%20%7B%0D%0A%09%09%09let%20listener%20%3D%20e%5B0%5D%2C%20elem%20%3D%20e%5B1%5D%2C%20eventType%20%3D%20e%5B2%5D%3B%0D%0A%09%09%09elem.removeEventListener%28eventType%2C%20listener%29%3B%0D%0A%09%09%7D%0D%0A%09%09bookmarkletVars.ourListenersAndTheirElemsAndEventTypes%20%3D%20%5B%5D%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20addListenerToOurList%28listener_%2C%20elem_%2C%20eventType_%29%20%7B%0D%0A%09%09bookmarkletVars.ourListenersAndTheirElemsAndEventTypes.push%28%0D%0A%09%09%09%5Blistener_%2C%20elem_%2C%20eventType_%5D%29%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20drawAllDecorations%28parentElemForEverythingWeCreate_%29%20%7B%0D%0A%09%09let%20decorationsParentElem%20%3D%20document.createElement%28%27div%27%29%3B%0D%0A%09%09parentElemForEverythingWeCreate_.appendChild%28decorationsParentElem%29%3B%0D%0A%09%09let%20selector%20%3D%20%60button%2C%20a%2C%20label%2C%20div%5Brole%3D%22button%22%5D%2C%20%0D%0A%09%09%09details%20%3E%20summary%2C%20input%3Anot%28%5Btype%3Dhidden%5D%29%2C%20select%2C%20textarea%2C%20%5Btabindex%5D%2C%20%60%3B%0D%0A%09%09let%20selectorRoles%20%3D%20%5B%27button%27%2C%20%27checkbox%27%2C%20%27link%27%2C%20%27menuitem%27%2C%20%27option%27%2C%20%0D%0A%09%09%09%27radio%27%2C%20%27switch%27%2C%20%27tab%27%5D%3B%0D%0A%09%09selector%20%2B%3D%20selectorRoles.map%28x%20%3D%3E%20%60%5Brole%3D%22%24%7Bx%7D%22%5D%60%29.join%28%27%2C%20%27%29%3B%0D%0A%09%09let%20elems%20%3D%20document.querySelectorAll%28selector%29%3B%0D%0A%09%09for%28let%20elem%20of%20elems%29%20%7B%0D%0A%09%09%09if%28%21isElemVisible%28elem%29%29%20continue%3B%0D%0A%09%09%09if%28parentElemForEverythingWeCreate_.contains%28elem%29%29%20%7B%0D%0A%09%09%09%09continue%3B%20/%2A%20we%20don%27t%20want%20to%20decorate%20our%20menu.%20%2A/%0D%0A%09%09%09%7D%0D%0A%09%09%09let%20centerPtOfElem%20%3D%20getCenterPtOfElem%28elem%29%3B%0D%0A%09%09%09drawDecorationsForElem%28decorationsParentElem%2C%20elem.getBoundingClientRect%28%29%2C%20centerPtOfElem%29%3B%0D%0A%09%09%7D%0D%0A%09%7D%0D%0A%0D%0A%09function%20drawDecorationsForElem%28decorationsParentElem_%2C%20elemBoundingClientRect_%2C%20centerPtOfElem_%29%20%7B%0D%0A%09%09decorationsParentElem_.appendChild%28make24SquareDecorationElem%28centerPtOfElem_%29%29%3B%0D%0A%09%09decorationsParentElem_.appendChild%28make24CircleDecorationElem%28centerPtOfElem_%29%29%3B%0D%0A%09%09decorationsParentElem_.appendChild%28makeBoundingRectDecorationElem%28elemBoundingClientRect_%29%29%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20makeBoundingRectDecorationElem%28elemBoundingClientRect_%29%20%7B%0D%0A%09%09let%20r%20%3D%20elemBoundingClientRect_%3B%0D%0A%09%09let%20left%20%3D%20r.left%2Bwindow.scrollX%2C%20top%20%3D%20r.top%2Bwindow.scrollY%3B%0D%0A%09%09let%20right%20%3D%20r.right%2Bwindow.scrollX-1%2C%20bottom%20%3D%20r.bottom%2Bwindow.scrollY-1%3B%0D%0A%09%09let%20strokeWidth%20%3D%201%3B%0D%0A%09%09let%20singleRectSvgStrFunc%20%3D%20%28color%29%20%3D%3E%20%60%3Crect%20x%3D%22%24%7BstrokeWidth/2%7D%22%20y%3D%22%24%7BstrokeWidth/2%7D%22%20%0D%0A%09%09%09%09width%3D%22%24%7Br.width-1%7D%22%20height%3D%22%24%7Br.height-1%7D%22%20%0D%0A%09%09%09%09stroke%3D%22%24%7Bcolor%7D%22%20stroke-width%3D%22%24%7BstrokeWidth%7D%22%20fill%3D%22transparent%22%20/%3E%20%60%3B%0D%0A%09%09let%20svgStr%20%3D%20%0D%0A%09%09%09%60%3Csvg%20xmlns%3D%27http%3A//www.w3.org/2000/svg%27%20aria-hidden%3D%22true%22%20%0D%0A%09%09%09%09%09style%3D%22position%3A%20absolute%3B%20%0D%0A%09%09%09%09%09%09left%3A%20%24%7Bleft%7Dpx%3B%20top%3A%20%24%7Btop%7Dpx%3B%20right%3A%20%24%7Bright%7Dpx%3B%20bottom%3A%20%24%7Bbottom%7Dpx%3B%20%0D%0A%09%09%09%09%09%09z-index%3A%209999%3B%20margin%3A%200px%3B%20pointer-events%3A%20none%3B%22%3E%20%0D%0A%09%09%09%09%24%7BsingleRectSvgStrFunc%28%22rgba%28255%2C0%2C0%2C0.4%29%22%29%7D%20%0D%0A%09%09%09%09%24%7BsingleRectSvgStrFunc%28%22rgba%28255%2C255%2C255%2C0.15%29%22%29%7D%20%0D%0A%09%09%09%09%24%7BsingleRectSvgStrFunc%28%22rgba%280%2C0%2C0%2C0.15%29%22%29%7D%20%0D%0A%09%09%09%3C/svg%3E%60%3B%0D%0A%0D%0A%09%09let%20svg%20%3D%20%28new%20DOMParser%28%29%29.parseFromString%28svgStr%2C%20%27image/svg%2Bxml%27%29%3B%0D%0A%09%09svg%20%3D%20svg.documentElement%3B%0D%0A%09%09return%20svg%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20drawMouseCursor%28parentElemForEverythingWeCreate_%29%20%7B%0D%0A%09%09let%20squareSideLen%20%3D%2024%3B%0D%0A%0D%0A%09%09let%20radius%20%3D%20squareSideLen/2%3B%0D%0A%09%09let%20maskId%20%3D%20%60bookmarklet_%24%7BUNIQUE_ID_FOR_THIS_BOOKMARKLET%7D_mouse_cursor_clippath%60%3B%0D%0A%09%09let%20svgMarkup%20%3D%20%60%0D%0A%09%09%09%3Csvg%20height%3D%22%24%7BsquareSideLen%7D%22%20width%3D%22%24%7BsquareSideLen%7D%22%20%0D%0A%09%09%09%09%09xmlns%3D%27http%3A//www.w3.org/2000/svg%27%20%3E%20%0D%0A%0D%0A%09%09%09%09%3Cdefs%3E%0D%0A%09%09%09%09%09%3Cmask%20id%3D%22%24%7BmaskId%7D%22%3E%0D%0A%09%09%09%09%09%09%3Crect%20width%3D%22100%25%22%20height%3D%22100%25%22%20fill%3D%22white%22/%3E%0D%0A%09%09%09%09%09%09%3Ccircle%20r%3D%22%24%7Bradius%7D%22%20cx%3D%22%24%7Bradius%7D%22%20cy%3D%22%24%7Bradius%7D%22%20fill%3D%22black%22/%3E%0D%0A%09%09%09%09%09%3C/mask%3E%0D%0A%09%09%09%09%3C/defs%3E%0D%0A%0D%0A%09%09%09%09%3Crect%20x%3D%220%22%20y%3D%220%22%20rx%3D%220%22%20ry%3D%220%22%20%0D%0A%09%09%09%09%09%09width%3D%22%24%7BsquareSideLen%2B1%7D%22%20height%3D%22%24%7BsquareSideLen%2B1%7D%22%20%0D%0A%09%09%09%09%09%09fill%3D%22rgba%28255%2C255%2C255%2C0.33%29%22%20mask%3D%22url%28%23%24%7BmaskId%7D%29%22%20/%3E%20%0D%0A%0D%0A%09%09%09%09%3Crect%20x%3D%220%22%20y%3D%220%22%20rx%3D%220%22%20ry%3D%220%22%20%0D%0A%09%09%09%09%09%09width%3D%22%24%7BsquareSideLen%2B1%7D%22%20height%3D%22%24%7BsquareSideLen%2B1%7D%22%20%0D%0A%09%09%09%09%09%09fill%3D%22rgba%280%2C0%2C0%2C0.33%29%22%20mask%3D%22url%28%23%24%7BmaskId%7D%29%22%20/%3E%20%0D%0A%0D%0A%09%09%09%3C/svg%3E%60%3B%0D%0A%09%09/%2A%20%5E%5E%20using%20two%20rects%20instead%20of%20one%20because%20this%20way%20it%20shows%20up%20well%20on%20top%20of%20both%20%0D%0A%09%09black%20and%20white.%20%20I%20don%27t%20know%20why%20that%20works%2C%20but%20it%20does.%20%20we%20do%20this%20with%20our%20%0D%0A%09%09element%20decorations%20too.%20%2A/%0D%0A%0D%0A%09%09let%20cursorElem%20%3D%20document.createElement%28%27div%27%29%3B%0D%0A%09%09cursorElem.innerHTML%20%3D%20svgMarkup%3B%0D%0A%09%09cursorElem.style.position%20%3D%20%27absolute%27%3B%0D%0A%09%09cursorElem.style.zIndex%20%3D%20%27999999%27%3B%0D%0A%09%09cursorElem.style.pointerEvents%20%3D%20%27none%27%3B%0D%0A%0D%0A%09%09parentElemForEverythingWeCreate_.appendChild%28cursorElem%29%3B%0D%0A%0D%0A%09%09function%20setMouseCursorPos%28x_%2C%20y_%29%20%7B%0D%0A%09%09%09/%2A%20rounding%20to%20ints%20because%20e_.pageX%20/%20e_.pageY%20are%20always%20ints%20apparently%2C%20%0D%0A%09%09%09even%20though%20I%20read%20specs%20that%20say%20they%20are%20floats.%20%20we%20want%20our%20mouse%20cursor%20to%20%0D%0A%09%09%09line%20up%20exactly%20with%20our%20decorations%2C%20if%20the%20user%20moves%20the%20mouse%20cursor%20over%20%0D%0A%09%09%09a%20decoration.%20%20so%20we%20round%20the%20position%20of%20both%20to%20ints.%20%20%0D%0A%0D%0A%09%09%09circa%202023-11-01%2C%20this%20rounding%20isn%27t%20doing%20what%20I%20want%20i.e.%20%0D%0A%09%09%09the%20decoration%20and%20mouse%20cursor%20don%27t%20line%20up%20exactly.%20%20I%20don%27t%20know%20why.%20%20%0D%0A%0D%0A%09%09%09see%20note%2093a9bc2f-4da0-431e-88a5-5997d0c01fc6.%20%0D%0A%09%09%09%2A/%0D%0A%09%09%09let%20left%20%3D%20Math.round%28x_%20-%20%28squareSideLen/2%20%2B%201%29%29%3B%0D%0A%09%09%09let%20top%20%3D%20Math.round%28y_%20-%20%28squareSideLen/2%20%2B%201.5%29%29%3B%0D%0A%09%09%09cursorElem.style.left%20%3D%20%60%24%7Bleft%7Dpx%60%3B%0D%0A%09%09%09cursorElem.style.top%20%3D%20%60%24%7Btop%7Dpx%60%3B%0D%0A%09%09%7D%0D%0A%0D%0A%09%09let%20mouseMoveListener%20%3D%20function%28e_%29%20%7B%0D%0A%09%09%09setMouseCursorPos%28e_.pageX%2C%20e_.pageY%29%3B%0D%0A%09%09%09bookmarkletVars.lastKnownMousePos%20%3D%20%7Bx%3A%20e_.pageX%2C%20y%3A%20e_.pageY%7D%3B%0D%0A%09%09%7D%3B%0D%0A%09%09addEventListener%28document%2C%20%27mousemove%27%2C%20mouseMoveListener%29%3B%0D%0A%0D%0A%09%09/%2A%20Doing%20this%20so%20that%20if%20you%27re%20re-running%20this%20bookmarklet%20a%20lot%20via%20the%20keyboard%20%0D%0A%09%09shortcut%20and%20you%20have%20decorations%20turned%20off%20%28or%20there%20isn%27t%20anything%20in%20the%20viewport%20%0D%0A%09%09to%20decorate%29%2C%20you%27ll%20still%20see%20our%20mouse%20cursor%20appear%20and%20disappear.%20%20you%20won%27t%20need%20%0D%0A%09%09to%20jog%20it%20in%20order%20to%20see%20it.%20%20we%20save%20you%20the%20trouble%2C%20so%20that%20you%20know%20that%20this%20%0D%0A%09%09bookmarklet%20is%20working.%20%2A/%0D%0A%09%09if%28bookmarkletVars.lastKnownMousePos%20%21%3D%3D%20undefined%29%20%7B%0D%0A%09%09%09setMouseCursorPos%28bookmarkletVars.lastKnownMousePos.x%2C%20%0D%0A%09%09%09%09bookmarkletVars.lastKnownMousePos.y%29%3B%0D%0A%09%09%7D%0D%0A%09%7D%0D%0A%0D%0A%09function%20draw%28%29%20%7B%0D%0A%09%09let%20parentElemForEverythingWeCreate%20%3D%20document.createElement%28%27div%27%29%3B%0D%0A%09%09addEraseMarkerToElem%28parentElemForEverythingWeCreate%29%3B%0D%0A%09%09document.body.appendChild%28parentElemForEverythingWeCreate%29%3B%0D%0A%0D%0A%09%09if%28ENABLE_MENU%20%26%26%20bookmarkletVars.optionNameToValue%5B%22show-menu%22%5D%29%20%7B%0D%0A%09%09%09drawMenu%28parentElemForEverythingWeCreate%29%3B%0D%0A%09%09%7D%0D%0A%0D%0A%09%09if%28ENABLE_MOUSE_CURSOR%20%26%26%20bookmarkletVars.optionNameToValue%5B%22enable-mouse-cursor%22%5D%29%20%7B%0D%0A%09%09%09drawMouseCursor%28parentElemForEverythingWeCreate%29%3B%0D%0A%09%09%7D%0D%0A%0D%0A%09%09if%28ENABLE_DECORATIONS%20%26%26%20bookmarkletVars.optionNameToValue%5B%22enable-element-decorations%22%5D%29%20%7B%0D%0A%09%09%09drawAllDecorations%28parentElemForEverythingWeCreate%29%3B%0D%0A%09%09%7D%0D%0A%0D%0A%0D%0A%09%7D%0D%0A%0D%0A%09function%20makeMenuExpandedViewStyleStr%28%29%20%7B%0D%0A%09%09let%20r%20%3D%20%60position%3A%20fixed%3B%20top%3A%200%3B%20%0D%0A%09%09%09background%3A%20%23fff%3B%20border%3A%200.2vw%20solid%20black%20%3B%20%0D%0A%09%09%09padding%3A%200.2vw%3B%20z-index%3A%20999999%3B%20font-size%3A%201.5vw%20%3B%20%20%60%3B%0D%0A%09%09let%20position%20%3D%20%22top-left%22%3B%0D%0A%09%09if%28position%20%3D%3D%3D%20%22top-left%22%29%20%7B%0D%0A%09%09%09r%20%2B%3D%20%60left%3A%200%25%3B%20%20%60%3B%0D%0A%09%09%7D%20else%20if%28position%20%3D%3D%3D%20%22top-right%22%29%20%7B%0D%0A%09%09%09r%20%2B%3D%20%60left%3A%20100%25%3B%20transform%3A%20translateX%28-100%25%29%3B%20%20%60%3B%0D%0A%09%09%7D%20else%20if%28position%20%3D%3D%3D%20%22top-center%22%29%20%7B%0D%0A%09%09%09r%20%2B%3D%20%60left%3A%2050%25%3B%20transform%3A%20translateX%28-50%25%29%3B%20%20%60%3B%0D%0A%09%09%7D%20else%20%7B%0D%0A%09%09%09throw%20new%20Error%28%29%3B%0D%0A%09%09%7D%0D%0A%09%09return%20r%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20makeMenuCollapsedViewStyleStr%28%29%20%7B%0D%0A%09%09let%20r%20%3D%20%60position%3A%20fixed%3B%20top%3A%200%3B%20%0D%0A%09%09%09background%3A%20%23fff%3B%20border%3A%200.2vw%20solid%20black%20%3B%20%0D%0A%09%09%09padding%3A%200.2vw%3B%20z-index%3A%20999999%3B%20font-size%3A%201.5vw%20%3B%20%20%60%3B%0D%0A%09%09let%20position%20%3D%20%22top-left%22%3B%0D%0A%09%09if%28position%20%3D%3D%3D%20%22top-left%22%29%20%7B%0D%0A%09%09%09r%20%2B%3D%20%60left%3A%200%25%3B%20%20%60%3B%0D%0A%09%09%7D%20else%20if%28position%20%3D%3D%3D%20%22top-right%22%29%20%7B%0D%0A%09%09%09r%20%2B%3D%20%60left%3A%20100%25%3B%20transform%3A%20translateX%28-100%25%29%3B%20%20%60%3B%0D%0A%09%09%7D%20else%20if%28position%20%3D%3D%3D%20%22top-center%22%29%20%7B%0D%0A%09%09%09r%20%2B%3D%20%60left%3A%2050%25%3B%20transform%3A%20translateX%28-50%25%29%3B%20%20%60%3B%0D%0A%09%09%7D%20else%20%7B%0D%0A%09%09%09throw%20new%20Error%28%29%3B%0D%0A%09%09%7D%0D%0A%09%09return%20r%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20initMenuListeners%28expandedMenuRootElem_%2C%20collapsedMenuRootElem_%29%20%7B%0D%0A%09%09function%20onOptionCheckboxChanged%28optionName__%2C%20event__%29%20%7B%0D%0A%09%09%09bookmarkletVars.optionNameToValue%5BoptionName__%5D%20%3D%20event__.target.checked%3B%0D%0A%09%09%09refresh%28%29%3B%0D%0A%09%09%7D%0D%0A%09%09for%28let%20checkboxName%20of%20%5B%22enable-mouse-cursor%22%2C%20%22enable-element-decorations%22%5D%29%20%7B%0D%0A%09%09%09let%20checkbox%20%3D%20expandedMenuRootElem_.querySelector%28%60input%5Bname%3D%22%24%7BcheckboxName%7D%22%5D%60%29%3B%0D%0A%09%09%09checkbox.checked%20%3D%20%21%21bookmarkletVars.optionNameToValue%5BcheckboxName%5D%3B%0D%0A%09%09%09addEventListener%28checkbox%2C%20%22change%22%2C%20%0D%0A%09%09%09%09%28event%29%20%3D%3E%20onOptionCheckboxChanged%28checkboxName%2C%20event%29%29%3B%0D%0A%09%09%7D%0D%0A%0D%0A%09%09function%20onCloseButtonClicked%28%29%20%7B%0D%0A%09%09%09bookmarkletVars.optionNameToValue%5B%22show-menu%22%5D%20%3D%20false%3B%0D%0A%09%09%09refresh%28%29%3B%0D%0A%09%09%7D%0D%0A%09%09let%20closeButton%20%3D%20expandedMenuRootElem_.querySelector%28%60button%5Bname%3D%22close%22%5D%60%29%3B%0D%0A%09%09addEventListener%28closeButton%2C%20%22click%22%2C%20onCloseButtonClicked%29%3B%0D%0A%0D%0A%09%09function%20onCollapseButtonClicked%28%29%20%7B%0D%0A%09%09%09expandedMenuRootElem_.style.display%20%3D%20%27none%27%3B%0D%0A%09%09%09collapsedMenuRootElem_.style.display%20%3D%20%27block%27%3B%0D%0A%09%09%7D%0D%0A%09%09let%20collapseButton%20%3D%20expandedMenuRootElem_.querySelector%28%60button%5Bname%3D%22collapse%22%5D%60%29%3B%0D%0A%09%09addEventListener%28collapseButton%2C%20%22click%22%2C%20onCollapseButtonClicked%29%3B%0D%0A%0D%0A%0D%0A%09%09function%20onExpandButtonClicked%28%29%20%7B%0D%0A%09%09%09expandedMenuRootElem_.style.display%20%3D%20%27block%27%3B%0D%0A%09%09%09collapsedMenuRootElem_.style.display%20%3D%20%27none%27%3B%0D%0A%09%09%7D%0D%0A%09%09let%20expandButton%20%3D%20collapsedMenuRootElem_.querySelector%28%60button%5Bname%3D%22expand%22%5D%60%29%3B%0D%0A%09%09addEventListener%28expandButton%2C%20%22click%22%2C%20onExpandButtonClicked%29%3B%0D%0A%0D%0A%0D%0A%09%7D%0D%0A%0D%0A%09function%20drawMenu%28parentElemForEverythingWeCreate_%29%20%7B%0D%0A%09%09let%20expandedMenuRootElem%20%3D%20drawMenuExpandedView%28parentElemForEverythingWeCreate_%29%3B%0D%0A%09%09let%20collapsedMenuRootElem%20%3D%20drawMenuCollapsedView%28parentElemForEverythingWeCreate_%29%3B%0D%0A%09%09initMenuListeners%28expandedMenuRootElem%2C%20collapsedMenuRootElem%29%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20drawMenuCollapsedView%28parentElemForEverythingWeCreate_%29%20%7B%0D%0A%09%09let%20rootElem%20%3D%20document.createElement%28%27div%27%29%3B%0D%0A%09%09parentElemForEverythingWeCreate_.appendChild%28rootElem%29%3B%0D%0A%09%09rootElem.style%20%3D%20makeMenuCollapsedViewStyleStr%28%29%3B%0D%0A%09%09rootElem.style.display%20%3D%20%27none%27%3B%0D%0A%09%09rootElem.innerHTML%20%3D%20%60%20%0D%0A%09%09%09%3Cbutton%20name%3D%22expand%22%20title%3D%22expand%22%20aria-label%3D%22expand%22%20%0D%0A%09%09%09%09%09style%3D%22float%3A%20right%3B%20margin%3A%200.2vw%3B%20z-index%3A%2010%3B%20font-size%3A%201.0vw%20%3B%20%0D%0A%09%09%09%09%09%09padding%3A%200.1vw%3B%20%22%20%0D%0A%09%09%09%09%3E%E2%96%BC%3C/button%3E%0D%0A%09%09%09%60%3B%0D%0A%09%09return%20rootElem%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20drawMenuExpandedView%28parentElemForEverythingWeCreate_%29%20%7B%0D%0A%09%09let%20rootElem%20%3D%20document.createElement%28%27div%27%29%3B%0D%0A%09%09parentElemForEverythingWeCreate_.appendChild%28rootElem%29%3B%0D%0A%09%09rootElem.style%20%3D%20makeMenuExpandedViewStyleStr%28%29%3B%0D%0A%09%09rootElem.innerHTML%20%3D%20%60%20%0D%0A%09%09%09%3Cbutton%20name%3D%22close%22%20title%3D%22close%22%20aria-label%3D%22close%22%20%0D%0A%09%09%09%09%09style%3D%22float%3A%20right%3B%20margin%3A%200.2vw%3B%20z-index%3A%2010%3B%20font-size%3A%201.0vw%20%3B%20%0D%0A%09%09%09%09%09%09padding%3A%200.1vw%3B%20%22%20%0D%0A%09%09%09%09%3E%E2%9C%96%3C/button%3E%0D%0A%09%09%09%3Cbutton%20name%3D%22collapse%22%20title%3D%22collapse%22%20aria-label%3D%22collapse%22%20%0D%0A%09%09%09%09%09style%3D%22float%3A%20right%3B%20margin%3A%200.2vw%3B%20z-index%3A%2010%3B%20font-size%3A%201.0vw%20%3B%20%0D%0A%09%09%09%09%09%09padding%3A%200.1vw%3B%20%22%20%0D%0A%09%09%09%09%3E%E2%96%B2%3C/button%3E%0D%0A%09%09%09%3Cstrong%3ETarget%20size%20bookmarklet%3C/strong%3E%3Cbr%3E%0D%0A%09%09%09Usage%3A%20run%20it%20twice%20to%20make%20it%20disappear.%20%20alt%2Br%20to%20re-run%20it.%3Cbr%3E%0D%0A%09%09%09Options%3A%3Cbr%3E%0D%0A%09%09%09%3Clabel%3E%0D%0A%09%09%09%09%3Cinput%20type%3D%22checkbox%22%20name%3D%22enable-mouse-cursor%22%20%0D%0A%09%09%09%09%09style%3D%22width%3A%201.5vw%3B%20height%3A%201.5vw%3B%20%22%20%20%3E%20%0D%0A%09%09%09%09Enable%20mouse%20cursor%0D%0A%09%09%09%3C/label%3E%20%0D%0A%09%09%09%3Cbr%3E%20%0D%0A%09%09%09%3Clabel%3E%0D%0A%09%09%09%09%3Cinput%20type%3D%22checkbox%22%20name%3D%22enable-element-decorations%22%20%0D%0A%09%09%09%09%09style%3D%22width%3A%201.5vw%3B%20height%3A%201.5vw%3B%20%22%20checked%20%3E%20%0D%0A%09%09%09%09Enable%20element%20decorations%0D%0A%09%09%09%3C/label%3E%20%0D%0A%09%09%60%3B%0D%0A%09%09return%20rootElem%3B%0D%0A%09%7D%0D%0A%0D%0A%09%0D%0A%09/%2A%20Doing%20it%20this%20way%20makes%20it%20so%20that%20this%20code%20can%20run%20either%3A%0D%0A%09-%20as%20a%20bookmarklet%20%28in%20which%20case%20this%20code%20will%20probably%20be%20run%20after%20page%20load%20is%20finished%29%0D%0A%09or%3A%0D%0A%09-%20as%20a%20tampermonkey%20script%20via%20%22%40require%22%20%28in%20which%20case%20this%20code%20will%20definitely%20be%20run%20well%20%0D%0A%09before%20page%20load%20is%20finished.%29%20%2A/%0D%0A%09if%28document.readyState%20%3D%3D%3D%20%22complete%22%29%20%7B%0D%0A%09%09run%28%29%3B%0D%0A%09%7D%20else%20%7B%0D%0A%09%09document.addEventListener%28%22readystatechange%22%2C%20%28event__%29%20%3D%3E%20%7B%0D%0A%09%09%09if%28document.readyState%20%3D%3D%3D%20%22complete%22%29%20%7B%0D%0A%09%09%09%09run%28%29%3B%0D%0A%09%09%09%7D%0D%0A%09%09%7D%29%3B%0D%0A%09%7D%0D%0A%0D%0A%7D%29%28bookmarkletVars_9c277bdd_ef7d_4030_a1a3_da6b2dbcf8a6%20%7C%7C%20%28bookmarkletVars_9c277bdd_ef7d_4030_a1a3_da6b2dbcf8a6%20%3D%20%7B%7D%29%29%3B%0D%0A
">WCAG target size bookmarklet v0.2</a>
	<br>Changes since version v0.1:
			<ul>
				<li>Added an "options" menu.</li>
				<li>For "element decorations" feature: This bookmarklet no longer makes judgements on whether an element is bigger than 24x24 or not.  It used to, in version v0.1, via blue squares and red circles.  Now it doesn't, because those judgements were wrong as often as they were right.</li>
				<li>For "element decorations" feature: Now drawing element bounding boxes.  (In Javascript, this is  element.getBoundingClientRect()).</li>
				<li>For "element decorations" feature: Now trying to decorate all clickable elements including all (or most?) ARIA widget roles.</li>
			</ul>
	</li>
	<li>
		<h3>Version v0.1 (2023-11-06)</h3> <a href="javascript:%0D%0Avar%20bookmarkletVars_9c277bdd_ef7d_4030_a1a3_da6b2dbcf8a6%3B%0D%0A%28async%20function%20%28bookmarkletVars%29%20%7B%0D%0A%0D%0A%09let%20ENABLE_DECORATIONS%20%3D%20true%2C%20ENABLE_MOUSE_CURSOR%20%3D%20true%3B%0D%0A%0D%0A%09let%20ERASE_MARKER_DATA_ATTRIBUTE%20%3D%20%22data-bookmarklet-9c277bdd_ef7d_4030_a1a3_da6b2dbcf8a6-erase-marker%22%3B%0D%0A%0D%0A%09function%20doFirstRunJobs%28%29%20%7B%0D%0A%09%09bookmarkletVars.ourListenersAndTheirElemsAndEventTypes%20%3D%20%5B%5D%3B%0D%0A%09%09addKeyListenerForReRun%28%29%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20run%28%29%20%7B%0D%0A%09%09toggleState%28%29%3B%0D%0A%09%09drawOrEraseAsAppropriateBasedOnState%28%29%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20addKeyListenerForReRun%28%29%20%7B%0D%0A%09%09document.addEventListener%28%27keydown%27%2C%20function%28e%29%20%7B%0D%0A%09%09%09if%20%28e.altKey%20%26%26%20e.key%20%3D%3D%3D%20%27r%27%29%20%7B%0D%0A%09%09%09%09/%2A%20e.preventDefault%28%29%3B%20%20%2A/%0D%0A%09%09%09%09run%28%29%3B%0D%0A%09%09%09%7D%0D%0A%09%09%7D%2C%20false%29%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20toggleState%28%29%20%7B%0D%0A%09%09bookmarkletVars.toggleStateIsDrawAsOpposedToErase%20%3D%20%0D%0A%09%09%09%21bookmarkletVars.toggleStateIsDrawAsOpposedToErase%3B%0D%0A%09%7D%0D%0A%0D%0A%09if%28bookmarkletVars.toggleStateIsDrawAsOpposedToErase%20%3D%3D%3D%20undefined%29%20%7B%20/%2A%20first%20run%20%2A/%0D%0A%09%09doFirstRunJobs%28%29%3B%0D%0A%09%09bookmarkletVars.toggleStateIsDrawAsOpposedToErase%20%3D%20false%3B%0D%0A%09%7D%0D%0A%09%0D%0A%09function%20makeWrapperDiv%28%29%20%7B%0D%0A%09%09let%20r%20%3D%20document.createElement%28%27div%27%29%3B%0D%0A%09%09r.setAttribute%28%27style%27%2C%20%22position%3A%20relative%20%21important%3B%20margin%3A%200%20%21important%3B%20%22%2B%0D%0A%09%09%09%22padding%3A%200%20%21important%3B%22%29%3B%0D%0A%09%09return%20r%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20getCenterPtOfElem%28elem_%29%20%7B%0D%0A%09%09const%20rect%20%3D%20elem_.getBoundingClientRect%28%29%3B%0D%0A%09%09return%20%7B%0D%0A%09%09%09top%3A%20rect.top%20%2B%20window.scrollY%20%2B%20rect.height/2%2C%0D%0A%09%09%09left%3A%20rect.left%20%2B%20window.scrollX%20%2B%20rect.width/2%0D%0A%09%09%7D%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20makeCircleDecoratorElem%28centerPt_%29%20%7B%0D%0A%09%09let%20circleDiam%20%3D%2024%3B%0D%0A%09%09let%20circleRadius%20%3D%20circleDiam/2%3B%0D%0A%0D%0A%09%09/%2A%20re%3A%20rounding%2C%20see%20note%2093a9bc2f-4da0-431e-88a5-5997d0c01fc6.%20%0D%0A%09%09maybe%20we%20should%20do%20that%20rounding%20here%20%28if%20it%27s%20even%20possible%29.%20but%20we%20don%27t.%20%0D%0A%09%09%2A/%0D%0A%0D%0A%09%09let%20left%20%3D%20centerPt_.left%20-%20circleRadius%2C%20top%20%3D%20centerPt_.top%20-%20circleRadius%3B%0D%0A%09%09let%20svgStr%20%3D%20%0D%0A%09%09%09%60%3Csvg%20xmlns%3D%27http%3A//www.w3.org/2000/svg%27%20%0D%0A%09%09%09%09%09aria-hidden%3D%22true%22%20%0D%0A%09%09%09%09%09style%3D%22position%3A%20absolute%3B%20left%3A%20%24%7Bleft%7Dpx%3B%20top%3A%20%24%7Btop%7Dpx%3B%20%0D%0A%09%09%09%09%09%09width%3A%20%24%7BcircleDiam%7Dpx%3B%20height%3A%20%24%7BcircleDiam%7Dpx%3B%20z-index%3A%209999%3B%20margin%3A%200px%3B%20%0D%0A%09%09%09%09%09%09pointer-events%3A%20none%3B%22%3E%20%0D%0A%09%09%09%09%3Ccircle%20cx%3D%22%24%7BcircleRadius%7D%22%20cy%3D%22%24%7BcircleRadius%7D%22%20r%3D%22%24%7BcircleRadius%7D%22%20%0D%0A%09%09%09%09%09fill%3D%22rgba%28255%2C%200%2C%200%2C%200.33%29%22%3E%3C/circle%3E%20%0D%0A%09%09%09%3C/svg%3E%60%3B%0D%0A%09%09%0D%0A%09%09let%20r%20%3D%20%28new%20DOMParser%28%29%29.parseFromString%28svgStr%2C%20%27image/svg%2Bxml%27%29%3B%0D%0A%09%09r%20%3D%20r.documentElement%3B%0D%0A%09%09return%20r%3B%0D%0A%09%7D%0D%0A%0D%0A%0D%0A%09function%20makeSquareDecoratorElem%28centerPt_%29%20%7B%0D%0A%09%09let%20squareSideLen%20%3D%2024%2C%20halfSquareSideLen%20%3D%20squareSideLen/2%3B%0D%0A%09%09%0D%0A%09%09/%2A%20re%3A%20rounding%2C%20see%20note%2093a9bc2f-4da0-431e-88a5-5997d0c01fc6.%20%0D%0A%09%09maybe%20we%20should%20do%20that%20rounding%20here%20%28if%20it%27s%20even%20possible%29.%20but%20we%20don%27t.%20%0D%0A%09%09%2A/%0D%0A%0D%0A%09%09let%20left%20%3D%20centerPt_.left%20-%20halfSquareSideLen%2C%20top%20%3D%20centerPt_.top%20-%20halfSquareSideLen%3B%0D%0A%09%09let%20svgStr%20%3D%20%0D%0A%09%09%09%60%3Csvg%20xmlns%3D%27http%3A//www.w3.org/2000/svg%27%20aria-hidden%3D%22true%22%20%0D%0A%09%09%09%09%09style%3D%22position%3A%20absolute%3B%20left%3A%20%24%7Bleft%7Dpx%3B%20top%3A%20%24%7Btop%7Dpx%3B%20%0D%0A%09%09%09%09%09%09width%3A%20%24%7BsquareSideLen%7Dpx%3B%20height%3A%20%24%7BsquareSideLen%7Dpx%3B%20z-index%3A%209999%3B%20%0D%0A%09%09%09%09%09%09margin%3A%200px%3B%20pointer-events%3A%20none%3B%22%3E%20%0D%0A%09%09%09%09%3Crect%20x%3D%220%22%20y%3D%220%22%20width%3D%22%24%7BsquareSideLen%7D%22%20height%3D%22%24%7BsquareSideLen%7D%22%20%0D%0A%09%09%09%09%09fill%3D%22rgba%280%2C%200%2C%20255%2C%200.33%29%22/%3E%20%0D%0A%09%09%09%3C/svg%3E%60%3B%0D%0A%09%09let%20r%20%3D%20%28new%20DOMParser%28%29%29.parseFromString%28svgStr%2C%20%27image/svg%2Bxml%27%29%3B%0D%0A%09%09r%20%3D%20r.documentElement%3B%0D%0A%09%09return%20r%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20isBoundingClientRect24x24OrBigger%28rect_%29%20%7B%0D%0A%09%09let%20r%20%3D%20rect_.width%20%3E%3D%2024%20%26%26%20rect_.height%20%3E%3D%2024%3B%0D%0A%09%09return%20r%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20doesElemHaveZeroWidthAndZeroHeight%28elem_%29%20%7B%0D%0A%09%09let%20rect%20%3D%20elem_.getBoundingClientRect%28%29%3B%0D%0A%09%09let%20r%20%3D%20rect.width%20%3D%3D%3D%200%20%7C%7C%20rect.height%20%3D%3D%3D%200%3B%0D%0A%09%09return%20r%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20isElemCompletelyClipped%28elem_%29%20%7B%0D%0A%09%09return%20doesElemHaveZeroWidthAndZeroHeight%28elem_%29%20%7C%7C%20%0D%0A%09%09%09isElemCompletelyClippedByAnyAncestor%28elem_%29%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20isElemCompletelyClippedByAnyAncestor%28elem_%29%20%7B%0D%0A%09%09let%20currentElement%20%3D%20elem_%3B%0D%0A%09%09while%20%28currentElement.parentElement%29%20%7B%0D%0A%09%09%09let%20parent%20%3D%20currentElement.parentElement%3B%0D%0A%0D%0A%09%09%09let%20computedStyle%20%3D%20getComputedStyle%28parent%29%3B%0D%0A%09%09%09if%20%28computedStyle.overflow%20%3D%3D%3D%20%27hidden%27%20%7C%7C%20computedStyle.overflowX%20%3D%3D%3D%20%27hidden%27%20%0D%0A%09%09%09%09%09%7C%7C%20computedStyle.overflowY%20%3D%3D%3D%20%27hidden%27%29%20%7B%0D%0A%0D%0A%09%09%09%09let%20parentRect%20%3D%20parent.getBoundingClientRect%28%29%3B%0D%0A%09%09%09%09let%20elementRect%20%3D%20elem_.getBoundingClientRect%28%29%3B%0D%0A%0D%0A%09%09%09%09if%20%28elementRect.bottom%20%3C%3D%20parentRect.top%20%7C%7C%20%0D%0A%09%09%09%09%09%09elementRect.top%20%3E%3D%20parentRect.bottom%20%7C%7C%20%0D%0A%09%09%09%09%09%09elementRect.right%20%3C%3D%20parentRect.left%20%7C%7C%20%0D%0A%09%09%09%09%09%09elementRect.left%20%3E%3D%20parentRect.right%29%20%7B%0D%0A%09%09%09%09%09return%20true%3B%0D%0A%09%09%09%09%7D%0D%0A%09%09%09%7D%0D%0A%09%09%09currentElement%20%3D%20parent%3B%0D%0A%09%09%7D%0D%0A%09%09return%20false%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20isElemVisible%28elem_%29%20%7B%0D%0A%09%09let%20r%20%3D%20true%3B%0D%0A%09%09let%20elemStyle%20%3D%20getComputedStyle%28elem_%29%3B%0D%0A%09%09if%28elemStyle.visibility%20%3D%3D%3D%20%27hidden%27%29%20%7B%0D%0A%09%09%09r%20%3D%20false%3B%0D%0A%09%09%7D%0D%0A%09%09if%28r%29%20%7B%0D%0A%09%09%09for%28let%20elemAncestor%20%3D%20elem_%3B%20elemAncestor%3B%20elemAncestor%20%3D%20elemAncestor.parentElement%29%20%7B%0D%0A%09%09%09%09if%28getComputedStyle%28elemAncestor%29.display%20%3D%3D%3D%20%27none%27%29%20%7B%0D%0A%09%09%09%09%09r%20%3D%20false%3B%0D%0A%09%09%09%09%09break%3B%0D%0A%09%09%09%09%7D%0D%0A%09%09%09%7D%0D%0A%09%09%7D%0D%0A%09%09if%28r%20%26%26%20isElemCompletelyClipped%28elem_%29%29%20%7B%0D%0A%09%09%09r%20%3D%20false%3B%0D%0A%09%09%7D%0D%0A%09%09return%20r%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20drawOrEraseAsAppropriateBasedOnState%28%29%20%7B%0D%0A%09%09if%28bookmarkletVars.toggleStateIsDrawAsOpposedToErase%29%20%7B%0D%0A%09%09%09draw%28%29%3B%0D%0A%09%09%7D%20else%20%7B%0D%0A%09%09%09erase%28%29%3B%0D%0A%09%09%7D%0D%0A%09%7D%0D%0A%0D%0A%09function%20removeAllElementsAddedByUs%28%29%20%7B%0D%0A%09%09for%28let%20e%20of%20document.querySelectorAll%28%60%5B%24%7BERASE_MARKER_DATA_ATTRIBUTE%7D%5D%60%29%29%20%7B%0D%0A%09%09%09e.parentElement.removeChild%28e%29%3B%0D%0A%09%09%7D%0D%0A%09%7D%0D%0A%0D%0A%09function%20erase%28%29%20%7B%0D%0A%09%09removeAllElementsAddedByUs%28%29%3B%0D%0A%09%09removeAllListenersAddedByUs%28%29%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20addEraseMarkerToElem%28elem_%29%20%7B%0D%0A%09%09elem_.setAttribute%28ERASE_MARKER_DATA_ATTRIBUTE%2C%20%27%27%29%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20addEventListener%28elem_%2C%20eventType_%2C%20listener_%29%20%7B%0D%0A%09%09elem_.addEventListener%28eventType_%2C%20listener_%29%3B%0D%0A%09%09addListenerToOurList%28listener_%2C%20elem_%2C%20eventType_%29%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20removeAllListenersAddedByUs%28%29%20%7B%0D%0A%09%09for%28let%20e%20of%20bookmarkletVars.ourListenersAndTheirElemsAndEventTypes%29%20%7B%0D%0A%09%09%09let%20listener%20%3D%20e%5B0%5D%2C%20elem%20%3D%20e%5B1%5D%2C%20eventType%20%3D%20e%5B2%5D%3B%0D%0A%09%09%09elem.removeEventListener%28eventType%2C%20listener%29%3B%0D%0A%09%09%7D%0D%0A%09%09bookmarkletVars.ourListenersAndTheirElemsAndEventTypes%20%3D%20%5B%5D%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20addListenerToOurList%28listener_%2C%20elem_%2C%20eventType_%29%20%7B%0D%0A%09%09bookmarkletVars.ourListenersAndTheirElemsAndEventTypes.push%28%0D%0A%09%09%09%5Blistener_%2C%20elem_%2C%20eventType_%5D%29%3B%0D%0A%09%7D%0D%0A%0D%0A%09function%20draw%28%29%20%7B%0D%0A%09%09if%28ENABLE_DECORATIONS%29%20%7B%0D%0A%09%09%09let%20decoratorsParentElem%20%3D%20document.createElement%28%27div%27%29%3B%0D%0A%09%09%09addEraseMarkerToElem%28decoratorsParentElem%29%3B%0D%0A%09%09%09document.body.appendChild%28decoratorsParentElem%29%3B%0D%0A%09%09%09let%20elems%20%3D%20document.querySelectorAll%28%27input%2C%20button%2C%20a%27%29%3B%0D%0A%09%09%09for%28let%20elem%20of%20elems%29%20%7B%0D%0A%09%09%09%09if%28%21isElemVisible%28elem%29%29%20continue%3B%0D%0A%09%09%09%09let%20elemBoundingClientRect%20%3D%20elem.getBoundingClientRect%28%29%3B%0D%0A%09%09%09%09let%20centerPtOfElem%20%3D%20getCenterPtOfElem%28elem%29%3B%0D%0A%09%09%09%09let%20decoratorElem%20%3D%20isBoundingClientRect24x24OrBigger%28elemBoundingClientRect%29%20%0D%0A%09%09%09%09%09%3F%20makeSquareDecoratorElem%28centerPtOfElem%29%0D%0A%09%09%09%09%09%3A%20makeCircleDecoratorElem%28centerPtOfElem%29%3B%0D%0A%09%09%09%09if%28%21decoratorElem%29%20continue%3B%0D%0A%09%09%09%09decoratorsParentElem.appendChild%28decoratorElem%29%3B%0D%0A%09%09%09%7D%0D%0A%09%09%7D%0D%0A%0D%0A%09%09if%28ENABLE_MOUSE_CURSOR%29%20%7B%0D%0A%09%09%09let%20squareSideLen%20%3D%2024%3B%0D%0A%0D%0A%09%09%09let%20radius%20%3D%20squareSideLen/2%3B%0D%0A%09%09%09let%20maskId%20%3D%20%0D%0A%09%09%09%09%22bookmarklet_9c277bdd_ef7d_4030_a1a3_da6b2dbcf8a6_mouse_cursor_clippath%22%3B%0D%0A%09%09%09let%20svgMarkup%20%3D%20%60%0D%0A%09%09%09%09%3Csvg%20height%3D%22%24%7BsquareSideLen%7D%22%20width%3D%22%24%7BsquareSideLen%7D%22%20%0D%0A%09%09%09%09%09%09xmlns%3D%27http%3A//www.w3.org/2000/svg%27%20%3E%20%0D%0A%0D%0A%09%09%09%09%09%3Cdefs%3E%0D%0A%09%09%09%09%09%09%3Cmask%20id%3D%22%24%7BmaskId%7D%22%3E%0D%0A%09%09%09%09%09%09%09%3Crect%20width%3D%22100%25%22%20height%3D%22100%25%22%20fill%3D%22white%22/%3E%0D%0A%09%09%09%09%09%09%09%3Ccircle%20r%3D%22%24%7Bradius%7D%22%20cx%3D%22%24%7Bradius%7D%22%20cy%3D%22%24%7Bradius%7D%22%20fill%3D%22black%22/%3E%0D%0A%09%09%09%09%09%09%3C/mask%3E%0D%0A%09%09%09%09%09%3C/defs%3E%0D%0A%0D%0A%09%09%09%09%09%3Crect%20x%3D%220%22%20y%3D%220%22%20rx%3D%220%22%20ry%3D%220%22%20%0D%0A%09%09%09%09%09%09%09width%3D%22%24%7BsquareSideLen%2B1%7D%22%20height%3D%22%24%7BsquareSideLen%2B1%7D%22%20%0D%0A%09%09%09%09%09%09%09fill%3D%22%23fff%22%20fill-opacity%3D%220.4%22%20mask%3D%22url%28%23%24%7BmaskId%7D%29%22%20/%3E%20%0D%0A%0D%0A%09%09%09%09%09%3Crect%20x%3D%220%22%20y%3D%220%22%20rx%3D%220%22%20ry%3D%220%22%20%0D%0A%09%09%09%09%09%09%09width%3D%22%24%7BsquareSideLen%2B1%7D%22%20height%3D%22%24%7BsquareSideLen%2B1%7D%22%20%0D%0A%09%09%09%09%09%09%09fill%3D%22%23000%22%20fill-opacity%3D%220.4%22%20mask%3D%22url%28%23%24%7BmaskId%7D%29%22%20/%3E%20%0D%0A%0D%0A%09%09%09%09%3C/svg%3E%60%3B%0D%0A%09%09%09/%2A%20%5E%5E%20using%20two%20rects%20instead%20of%20one%20because%20this%20way%20it%20shows%20up%20well%20on%20top%20of%20both%20%0D%0A%09%09%09black%20and%20white.%20%20I%20don%27t%20know%20why%20that%20works%2C%20but%20it%20does.%20%2A/%0D%0A%0D%0A%09%09%09let%20cursorElement%20%3D%20document.createElement%28%27div%27%29%3B%0D%0A%09%09%09cursorElement.innerHTML%20%3D%20svgMarkup%3B%0D%0A%09%09%09cursorElement.style.position%20%3D%20%27absolute%27%3B%0D%0A%09%09%09cursorElement.style.zIndex%20%3D%20%27999999%27%3B%0D%0A%09%09%09cursorElement.style.pointerEvents%20%3D%20%27none%27%3B%0D%0A%0D%0A%09%09%09addEraseMarkerToElem%28cursorElement%29%3B%0D%0A%09%09%09document.body.appendChild%28cursorElement%29%3B%0D%0A%0D%0A%09%09%09function%20setMouseCursorPos%28x_%2C%20y_%29%20%7B%0D%0A%09%09%09%09/%2A%20rounding%20to%20ints%20because%20e_.pageX%20/%20e_.pageY%20are%20always%20ints%20apparently%2C%20%0D%0A%09%09%09%09even%20though%20I%20read%20specs%20that%20say%20they%20are%20floats.%20%20we%20want%20our%20mouse%20cursor%20to%20%0D%0A%09%09%09%09line%20up%20exactly%20with%20our%20decorators%2C%20if%20the%20user%20moves%20the%20mouse%20cursor%20over%20%0D%0A%09%09%09%09a%20decorator.%20%20so%20we%20round%20the%20position%20of%20both%20to%20ints.%20%20%0D%0A%0D%0A%09%09%09%09circa%202023-11-01%2C%20this%20rounding%20isn%27t%20doing%20what%20I%20want%20i.e.%20%0D%0A%09%09%09%09the%20decorator%20and%20mouse%20cursor%20don%27t%20line%20up%20exactly.%20%20I%20don%27t%20know%20why.%20%20%0D%0A%0D%0A%09%09%09%09see%20note%2093a9bc2f-4da0-431e-88a5-5997d0c01fc6.%20%0D%0A%09%09%09%09%2A/%0D%0A%09%09%09%09let%20left%20%3D%20Math.round%28x_%20-%20%28squareSideLen/2%20%2B%201%29%29%3B%0D%0A%09%09%09%09let%20top%20%3D%20Math.round%28y_%20-%20%28squareSideLen/2%20%2B%201.5%29%29%3B%0D%0A%09%09%09%09cursorElement.style.left%20%3D%20%60%24%7Bleft%7Dpx%60%3B%0D%0A%09%09%09%09cursorElement.style.top%20%3D%20%60%24%7Btop%7Dpx%60%3B%0D%0A%09%09%09%7D%0D%0A%0D%0A%09%09%09let%20mouseMoveListener%20%3D%20function%28e_%29%20%7B%0D%0A%09%09%09%09setMouseCursorPos%28e_.pageX%2C%20e_.pageY%29%3B%0D%0A%09%09%09%09bookmarkletVars.lastKnownMousePos%20%3D%20%7Bx%3A%20e_.pageX%2C%20y%3A%20e_.pageY%7D%3B%0D%0A%09%09%09%7D%3B%0D%0A%09%09%09addEventListener%28document%2C%20%27mousemove%27%2C%20mouseMoveListener%29%3B%0D%0A%0D%0A%09%09%09/%2A%20Doing%20this%20so%20that%20if%20you%27re%20re-running%20this%20bookmarklet%20a%20lot%20via%20the%20keyboard%20%0D%0A%09%09%09shortcut%20and%20you%20have%20decorators%20turned%20off%20%28or%20there%20isn%27t%20anything%20in%20the%20viewport%20%0D%0A%09%09%09to%20decorate%29%2C%20you%27ll%20still%20see%20our%20mouse%20cursor%20appear%20and%20disappear.%20%20you%20won%27t%20need%20%0D%0A%09%09%09to%20jog%20it%20in%20order%20to%20see%20it.%20%20we%20save%20you%20the%20trouble%2C%20so%20that%20you%20know%20that%20this%20%0D%0A%09%09%09bookmarklet%20is%20working.%20%2A/%0D%0A%09%09%09if%28bookmarkletVars.lastKnownMousePos%20%21%3D%3D%20undefined%29%20%7B%0D%0A%09%09%09%09setMouseCursorPos%28bookmarkletVars.lastKnownMousePos.x%2C%20%0D%0A%09%09%09%09%09bookmarkletVars.lastKnownMousePos.y%29%3B%0D%0A%09%09%09%7D%0D%0A%09%09%7D%0D%0A%09%7D%0D%0A%0D%0A%09%0D%0A%09/%2A%20Doing%20it%20this%20way%20makes%20it%20so%20that%20this%20code%20can%20run%20either%3A%0D%0A%09-%20as%20a%20bookmarklet%20%28in%20which%20case%20this%20code%20will%20probably%20be%20run%20after%20page%20load%20is%20finished%29%0D%0A%09or%3A%0D%0A%09-%20as%20a%20tampermonkey%20script%20via%20%22%40require%22%20%28in%20which%20case%20this%20code%20will%20definitely%20be%20run%20well%20%0D%0A%09before%20page%20load%20is%20finished.%29%20%2A/%0D%0A%09if%28document.readyState%20%3D%3D%3D%20%22complete%22%29%20%7B%0D%0A%09%09run%28%29%3B%0D%0A%09%7D%20else%20%7B%0D%0A%09%09document.addEventListener%28%22readystatechange%22%2C%20%28event__%29%20%3D%3E%20%7B%0D%0A%09%09%09if%28document.readyState%20%3D%3D%3D%20%22complete%22%29%20%7B%0D%0A%09%09%09%09run%28%29%3B%0D%0A%09%09%09%7D%0D%0A%09%09%7D%29%3B%0D%0A%09%7D%0D%0A%0D%0A%7D%29%28bookmarkletVars_9c277bdd_ef7d_4030_a1a3_da6b2dbcf8a6%20%7C%7C%20%28bookmarkletVars_9c277bdd_ef7d_4030_a1a3_da6b2dbcf8a6%20%3D%20%7B%7D%29%29%3B%0D%0A
">WCAG target size bookmarklet v0.1</a>
	</li>
</ul>


<h2>Source code</h2>
<a href="https://github.com/Siteimprove/wcag-target-size-bookmarklet">Source code on github.</a>  To see this source code, you might need to have permissions as a member of the Siteimprove github "organization".  If you don't, you might get a 404 error if you follow that github link.



</main>

</body>

</html>
